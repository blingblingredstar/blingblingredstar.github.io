<!DOCTYPE html>












  


<html class="theme-next pisces use-motion" lang="zh-CN">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
























<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2">

<link rel="stylesheet" href="/css/main.css?v=7.0.1">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.0.1">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=7.0.1">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=7.0.1">


  <link rel="mask-icon" href="/images/logo.svg?v=7.0.1" color="#222">







<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '7.0.1',
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false,"dimmer":false},
    back2top: true,
    back2top_sidebar: false,
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="Introduction This course is unique as compared to other React introductions because this course attempts to teach you not only React but the ecosystem around React. When I was learning React myself, I">
<meta name="keywords" content="FrontEndMasters,React,JavaScript,Parcel">
<meta property="og:type" content="article">
<meta property="og:title" content="Complete-intro-to-React-v5">
<meta property="og:url" content="http://yoursite.com/2019/06/17/Complete-intro-to-React-v5/index.html">
<meta property="og:site_name" content="刘勇的博客">
<meta property="og:description" content="Introduction This course is unique as compared to other React introductions because this course attempts to teach you not only React but the ecosystem around React. When I was learning React myself, I">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2019-06-17T02:26:59.266Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Complete-intro-to-React-v5">
<meta name="twitter:description" content="Introduction This course is unique as compared to other React introductions because this course attempts to teach you not only React but the ecosystem around React. When I was learning React myself, I">






  <link rel="canonical" href="http://yoursite.com/2019/06/17/Complete-intro-to-React-v5/">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>Complete-intro-to-React-v5 | 刘勇的博客</title>
  












  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">刘勇的博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">

    
    
    
      
    

    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>首页</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">

    
    
    
      
    

    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>标签</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">

    
    
    
      
    

    

    <a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>分类</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
    
      
    

    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>归档</a>

  </li>

      
      
    </ul>
  

  

  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
            

          
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/06/17/Complete-intro-to-React-v5/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="刘勇">
      <meta itemprop="description" content>
      <meta itemprop="image" content="https://img.zcool.cn/community/04c6fd55fa1a4a000001b19c79e625.jpg@160w_160h_1c_1e_1o_100sh.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="刘勇的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Complete-intro-to-React-v5

              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-06-17 10:22:23 / 修改时间：10:26:59" itemprop="dateCreated datePublished" datetime="2019-06-17T10:22:23+08:00">2019-06-17</time>
            

            
              

              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/学习笔记/" itemprop="url" rel="index"><span itemprop="name">学习笔记</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h2 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h2><blockquote>
<p>This course is unique as compared to other React introductions because this course attempts to teach you not only React but the ecosystem around React. When I was learning React myself, I found myself frustrated that it seemed like every tutorial started on step 14 and left out the steps 1-13 of how to set up a React project. React is nearly never used by itself so it’s useful to know the tools you’re using. I believe you as a developer should know how your tools works and what purpose they’re serving. Many times have I taught courses similar to this one to hear people using tools and complaining about them because they don’t actually know why they’re using them, just that they’re necessary. As such, in this course we show you how to build projects without any using tools at all and introduce the various tools, one at a time so you understand the actual problem being solved by the tool. Hopefully given the knowledge of the problem solved by the tool you’ll embrace the tools despite their complexities due to the ease and power they offer you.</p>
</blockquote>
<p><a href="https://github.com/btholt/complete-intro-to-react-v5" target="_blank" rel="noopener">github</a></p>
<p><a href="https://btholt.github.io/complete-intro-to-react-v5/" target="_blank" rel="noopener">course note</a></p>
<p><a href="https://www.sourcetreeapp.com/" target="_blank" rel="noopener">sourcetree</a></p>
<p><a href="https://frontendmasters.com/courses/git-in-depth/" target="_blank" rel="noopener">Git In-depth</a></p>
<p><a href="https://frontendhappyhour.com/" target="_blank" rel="noopener">Front End Happy Hour</a></p>
<a id="more"></a>
<h3 id="Project-Setup"><a href="#Project-Setup" class="headerlink" title="Project Setup"></a>Project Setup</h3><p><a href="https://docs.emmet.io/cheat-sheet/" target="_blank" rel="noopener">Emmet cheatsheet</a></p>
<h3 id="A-Note-on-the-Course-Font"><a href="#A-Note-on-the-Course-Font" class="headerlink" title="A Note on the Course Font"></a>A Note on the Course Font</h3><p><a href="https://dank.sh/" target="_blank" rel="noopener">Dank Mono</a></p>
<p><a href="https://github.com/tonsky/FiraCode" target="_blank" rel="noopener">Fira Code</a></p>
<h2 id="Pure-React"><a href="#Pure-React" class="headerlink" title="Pure React"></a>Pure React</h2><h3 id="Getting-Started-with-Pure-React"><a href="#Getting-Started-with-Pure-React" class="headerlink" title="Getting Started with Pure React"></a>Getting Started with Pure React</h3><!-- markdownlint-disable MD033 -->
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> App = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> React.createElement(</span><br><span class="line">        <span class="string">'div'</span>,</span><br><span class="line">        &#123;&#125;,</span><br><span class="line">        React.createElement(<span class="string">'h1'</span>, &#123;&#125;, <span class="string">'Adopt Me!'</span>)</span><br><span class="line">      )</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">ReactDOM.render(</span><br><span class="line">  React.createElement(App),</span><br><span class="line">  <span class="built_in">document</span>.getElementById(<span class="string">'root'</span>)</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h3 id="createElement-Arguments"><a href="#createElement-Arguments" class="headerlink" title="createElement Arguments"></a>createElement Arguments</h3><p>Three parameters that <code>React.createElement</code> get:</p>
<ol>
<li>what kind of tag is it (<code>h1</code> or <code>div</code> or a composite component)</li>
<li>All the attribute that you want to give the component ({ id: ?? })</li>
<li>Children</li>
</ol>
<h3 id="Reusable-Components"><a href="#Reusable-Components" class="headerlink" title="Reusable Components"></a>Reusable Components</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建一个Pet组件</span></span><br><span class="line"><span class="keyword">const</span> Pet = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> React.createElement(<span class="string">'div'</span>, &#123;&#125;, [</span><br><span class="line">    React.createElement(<span class="string">'h1'</span>, &#123;&#125;, <span class="string">"Luna"</span>),</span><br><span class="line">    React.createElement(<span class="string">'h2'</span>, &#123;&#125;, <span class="string">"Dog"</span>),</span><br><span class="line">    React.createElement(<span class="string">'h2'</span>, &#123;&#125;, <span class="string">"Havanese"</span>)</span><br><span class="line">  ])</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> App = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> React.createElement(</span><br><span class="line">    <span class="string">'div'</span>,</span><br><span class="line">    &#123;&#125;,</span><br><span class="line">    [</span><br><span class="line">      React.createElement(<span class="string">'h1'</span>, &#123; <span class="attr">id</span>: <span class="string">'something'</span> &#125;, <span class="string">'Adopt Me!'</span>),</span><br><span class="line">      <span class="comment">// 可以重复使用多次</span></span><br><span class="line">      React.createElement(Pet),</span><br><span class="line">      React.createElement(Pet),</span><br><span class="line">      React.createElement(Pet)</span><br><span class="line">    ]</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Passing-in-Component-Props"><a href="#Passing-in-Component-Props" class="headerlink" title="Passing in Component Props"></a>Passing in Component Props</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Pet = <span class="function">(<span class="params">props</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> React.createElement(<span class="string">'div'</span>, &#123;&#125;, [</span><br><span class="line">    React.createElement(<span class="string">'h1'</span>, &#123;&#125;, props.name),</span><br><span class="line">    React.createElement(<span class="string">'h2'</span>, &#123;&#125;, props.animal),</span><br><span class="line">    React.createElement(<span class="string">'h2'</span>, &#123;&#125;, props.breed)</span><br><span class="line">  ])</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> App = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> React.createElement(</span><br><span class="line">    <span class="string">'div'</span>,</span><br><span class="line">    &#123;&#125;,</span><br><span class="line">    [</span><br><span class="line">      React.createElement(<span class="string">'h1'</span>, &#123; <span class="attr">id</span>: <span class="string">'something'</span> &#125;, <span class="string">'Adopt Me!'</span>),</span><br><span class="line">      React.createElement(Pet, &#123;</span><br><span class="line">        name: <span class="string">'Luna'</span>,</span><br><span class="line">        animal: <span class="string">'Dog'</span>,</span><br><span class="line">        breed: <span class="string">'Havanese'</span></span><br><span class="line">      &#125;),</span><br><span class="line">      React.createElement(Pet, &#123;</span><br><span class="line">        name: <span class="string">'Pepper'</span>,</span><br><span class="line">        animal: <span class="string">'Bird'</span>,</span><br><span class="line">        breed: <span class="string">'Cockatiel'</span></span><br><span class="line">      &#125;),</span><br><span class="line">      React.createElement(Pet, &#123;</span><br><span class="line">        name: <span class="string">'Doink'</span>,</span><br><span class="line">        animal: <span class="string">'Cat'</span>,</span><br><span class="line">        breed: <span class="string">'Stray'</span></span><br><span class="line">      &#125;)</span><br><span class="line">    ]</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Destructuring-Props"><a href="#Destructuring-Props" class="headerlink" title="Destructuring Props"></a>Destructuring Props</h3><p>可以使用es6的对象结构赋值重新设置参数</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Pet = <span class="function">(<span class="params">&#123; name, animal, breed &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> React.createElement(<span class="string">'div'</span>, &#123;&#125;, [</span><br><span class="line">    React.createElement(<span class="string">'h1'</span>, &#123;&#125;, name),</span><br><span class="line">    React.createElement(<span class="string">'h2'</span>, &#123;&#125;, animal),</span><br><span class="line">    React.createElement(<span class="string">'h2'</span>, &#123;&#125;, breed)</span><br><span class="line">  ])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><a href="https://frontendmasters.com/courses/js-recent-parts/destructuring/" target="_blank" rel="noopener">destructuring</a></p>
<h2 id="Tools"><a href="#Tools" class="headerlink" title="Tools"></a>Tools</h2><h3 id="npm-amp-Generating-a-package-json-File"><a href="#npm-amp-Generating-a-package-json-File" class="headerlink" title="npm &amp; Generating a package.json File"></a>npm &amp; Generating a <code>package.json</code> File</h3><p><a href="https://www.npmjs.com/" target="_blank" rel="noopener">npm</a></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm init -y</span><br></pre></td></tr></table></figure>
<h3 id="Prettier"><a href="#Prettier" class="headerlink" title="Prettier"></a>Prettier</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i -D prettier</span><br></pre></td></tr></table></figure>
<h3 id="npm-Scripts"><a href="#npm-Scripts" class="headerlink" title="npm Scripts"></a>npm Scripts</h3><details><br><summary>package.json</summary><br><br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">"scripts": &#123;</span><br><span class="line">    "format": "prettier \"src/**/*.&#123;js,html&#125;\" --write",</span><br><span class="line">    "test": "echo \"Error: no test specified\" &amp;&amp; exit 1"</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure><br><br></details>

<h3 id="Prettier-Setup"><a href="#Prettier-Setup" class="headerlink" title="Prettier Setup"></a>Prettier Setup</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">touch .prettierrc</span><br></pre></td></tr></table></figure>
<details><br><summary>.prettierrc</summary><br><br><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"semi"</span>: <span class="literal">false</span>,</span><br><span class="line">  <span class="attr">"singleQuote"</span>: <span class="literal">true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><br></details>

<p><a href="https://prettier.io/" target="_blank" rel="noopener">https://prettier.io/</a></p>
<h3 id="ESLint-Setup"><a href="#ESLint-Setup" class="headerlink" title="ESLint Setup"></a>ESLint Setup</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i -D eslint eslint-config-prettier</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">touch .eslintrc.json</span><br></pre></td></tr></table></figure>
<h3 id="ESLint-Confirguration"><a href="#ESLint-Confirguration" class="headerlink" title="ESLint Confirguration"></a>ESLint Confirguration</h3><details><br><summary>.eslintrc.json</summary><br><br><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"extends"</span>: [</span><br><span class="line">    <span class="string">"eslint:recommended"</span>,</span><br><span class="line">    <span class="string">"prettier"</span>,</span><br><span class="line">    <span class="string">"prettier/react"</span></span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">"plugins"</span>: [],</span><br><span class="line">  <span class="attr">"parserOptions"</span>: &#123;</span><br><span class="line">    <span class="attr">"ecmaVersion"</span>: <span class="number">2019</span>,</span><br><span class="line">    <span class="attr">"sourceType"</span>: <span class="string">"module"</span>,</span><br><span class="line">    <span class="attr">"ecmaFeatures"</span>: &#123;</span><br><span class="line">      <span class="attr">"jsx"</span>: <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"env"</span>: &#123;</span><br><span class="line">    <span class="attr">"es6"</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">"browser"</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">"node"</span>: <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><br></details>

<p><br></p>
<details><br><summary>package.json</summary><br><br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">"lint": "eslint \"src/**/*.&#123;js,jsx&#125;\" --quiet"</span><br></pre></td></tr></table></figure><br><br></details>

<h3 id="gitignore"><a href="#gitignore" class="headerlink" title="gitignore"></a>gitignore</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">touch .gitignore</span><br></pre></td></tr></table></figure>
<details><br><summary>.gitignore设置</summary><br><pre><br>node_modules<br>.cache/<br>dist/<br>.env<br>.DS_Store<br>coverage/<br>.vscode/<br></pre><br></details>

<h3 id="Parcel"><a href="#Parcel" class="headerlink" title="Parcel"></a>Parcel</h3><p><a href="https://frontendmasters.com/courses/webpack-fundamentals/" target="_blank" rel="noopener">Webpack 4 Fundamentals</a></p>
<p><a href="https://frontendmasters.com/courses/react/" target="_blank" rel="noopener">Complete Intro to React, v3 (feat. Redux, Router &amp; Flow)</a></p>
<p><a href="https://parceljs.org/" target="_blank" rel="noopener">Parcel 极速零配置Web应用打包工具</a></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -D parcel-bundler</span><br></pre></td></tr></table></figure>
<details><br><summary>package.json</summary><br><br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">"dev": "parcel src/index.html",</span><br></pre></td></tr></table></figure><br><br></details>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run dev</span><br></pre></td></tr></table></figure>
<h3 id="Installing-React-amp-ReactDOM"><a href="#Installing-React-amp-ReactDOM" class="headerlink" title="Installing React &amp; ReactDOM"></a>Installing React &amp; ReactDOM</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i react react-dom</span><br></pre></td></tr></table></figure>
<details><br><summary>app.js</summary><br><br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">import</span> &#123; render &#125; <span class="keyword">from</span> <span class="string">'react-dom'</span></span><br></pre></td></tr></table></figure><br><br></details>

<h3 id="Separate-App-into-Modules"><a href="#Separate-App-into-Modules" class="headerlink" title="Separate App into Modules"></a>Separate App into Modules</h3><p>鼠标选中组件高亮显示，点击小灯泡(code action)，选择<code>move to a new file</code>，会将组件自动生成新文件并在当前文件进行导入</p>
<details><br><summary>Pet.js</summary><br><br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">Pet</span>(<span class="params">&#123; name, animal, breed &#125;</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> React.createElement(<span class="string">'div'</span>, &#123;&#125;, [</span><br><span class="line">    React.createElement(<span class="string">'h1'</span>, &#123;&#125;, name),</span><br><span class="line">    React.createElement(<span class="string">'h2'</span>, &#123;&#125;, animal),</span><br><span class="line">    React.createElement(<span class="string">'h2'</span>, &#123;&#125;, breed)</span><br><span class="line">  ])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><br></details>

<h2 id="JSX"><a href="#JSX" class="headerlink" title="JSX"></a>JSX</h2><h3 id="Converting-to-JSX"><a href="#Converting-to-JSX" class="headerlink" title="Converting to JSX"></a>Converting to JSX</h3><p><a href="https://www.babeljs.cn/" target="_blank" rel="noopener">Babel 是一个 JavaScript 编译器</a></p>
<p>Pet.js:</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">Pet</span>(<span class="params">&#123; name, animal, breed &#125;</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// return React.createElement('div', &#123;&#125;, [</span></span><br><span class="line">  <span class="comment">//   React.createElement('h1', &#123;&#125;, name),</span></span><br><span class="line">  <span class="comment">//   React.createElement('h2', &#123;&#125;, animal),</span></span><br><span class="line">  <span class="comment">//   React.createElement('h2', &#123;&#125;, breed)</span></span><br><span class="line">  <span class="comment">// ])</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 下面的代码会被babel编译为上面的代码</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;h1&gt;&#123;name&#125;&lt;<span class="regexp">/h1&gt;</span></span><br><span class="line"><span class="regexp">      &lt;h2&gt;&#123;animal&#125;&lt;/</span>h2&gt;</span><br><span class="line">      &lt;h2&gt;&#123;breed&#125;&lt;<span class="regexp">/h2&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>div&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Configuring-ESLint-for-React"><a href="#Configuring-ESLint-for-React" class="headerlink" title="Configuring ESLint for React"></a>Configuring ESLint for React</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -D babel-eslint eslint-plugin-import eslint-plugin-jsx-a11y eslint-plugin-react</span><br></pre></td></tr></table></figure>
<details><br><summary>.eslintrc.json</summary><br><br><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"extends"</span>: [</span><br><span class="line">    <span class="string">"eslint:recommended"</span>,</span><br><span class="line">    <span class="string">"plugin:import/errors"</span>,</span><br><span class="line">    <span class="string">"plugin:react/recommended"</span>,</span><br><span class="line">    <span class="string">"plugin:jsx-a11y/recommended"</span>,</span><br><span class="line">    <span class="string">"prettier"</span>,</span><br><span class="line">    <span class="string">"prettier/react"</span></span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">"plugins"</span>: [<span class="string">"react"</span>, <span class="string">"import"</span>, <span class="string">"jsx-a11y"</span>],</span><br><span class="line">  <span class="attr">"rules"</span>: &#123;</span><br><span class="line">    <span class="attr">"react/prop-types"</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">"no-console"</span>: <span class="number">1</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"parserOptions"</span>: &#123;</span><br><span class="line">    <span class="attr">"ecmaVersion"</span>: <span class="number">2019</span>,</span><br><span class="line">    <span class="attr">"sourceType"</span>: <span class="string">"module"</span>,</span><br><span class="line">    <span class="attr">"ecmaFeatures"</span>: &#123;</span><br><span class="line">      <span class="attr">"jsx"</span>: <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"env"</span>: &#123;</span><br><span class="line">    <span class="attr">"es6"</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">"browser"</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">"node"</span>: <span class="literal">true</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"settings"</span>: &#123;</span><br><span class="line">    <span class="attr">"react"</span>: &#123;</span><br><span class="line">      <span class="attr">"version"</span>: <span class="string">"detect"</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><br></details>

<h3 id="JSX-Composite-Components-amp-Expressions"><a href="#JSX-Composite-Components-amp-Expressions" class="headerlink" title="JSX Composite Components &amp; Expressions"></a>JSX Composite Components &amp; Expressions</h3><p>使用JSX语法重构App.js</p>
<details><br><summary>App.js</summary><br><br><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">import</span> &#123; render &#125; <span class="keyword">from</span> <span class="string">'react-dom'</span></span><br><span class="line"><span class="keyword">import</span> Pet <span class="keyword">from</span> <span class="string">'./Pet'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> App = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// return React.createElement('div', &#123;&#125;, [</span></span><br><span class="line">  <span class="comment">//   React.createElement('h1', &#123;&#125;, 'Adopt Me!'),</span></span><br><span class="line">  <span class="comment">//   React.createElement(Pet, &#123;</span></span><br><span class="line">  <span class="comment">//     name: 'Luna',</span></span><br><span class="line">  <span class="comment">//     animal: 'Dog',</span></span><br><span class="line">  <span class="comment">//     breed: 'Havanese'</span></span><br><span class="line">  <span class="comment">//   &#125;),</span></span><br><span class="line">  <span class="comment">//   React.createElement(Pet, &#123;</span></span><br><span class="line">  <span class="comment">//     name: 'Pepper',</span></span><br><span class="line">  <span class="comment">//     animal: 'Bird',</span></span><br><span class="line">  <span class="comment">//     breed: 'Cockatiel'</span></span><br><span class="line">  <span class="comment">//   &#125;),</span></span><br><span class="line">  <span class="comment">//   React.createElement(Pet, &#123; name: 'Doink', animal: 'Cat', breed: 'Mix' &#125;)</span></span><br><span class="line">  <span class="comment">// ])</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;h1&gt;Adopt Me!<span class="xml"><span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">      &lt;Pet name=<span class="string">"Luna"</span> animal=<span class="string">"Dog"</span> breed=<span class="string">"Havanese"</span> /&gt;</span><br><span class="line">      &lt;Pet name=<span class="string">"Pepper"</span> animal=<span class="string">"Bird"</span> breed=<span class="string">"Cocktiel"</span> /&gt;</span><br><span class="line">      &lt;Pet name=<span class="string">"Doink"</span> animal=<span class="string">"Cat"</span> breed=<span class="string">"Mixed"</span> /&gt;</span><br><span class="line">    &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">  )</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">render(/</span>* React.createElement(App) *<span class="regexp">/ &lt;App /</span>&gt;, <span class="built_in">document</span>.getElementById(<span class="string">'root'</span>))</span><br></pre></td></tr></table></figure><br><br></details>

<h2 id="Hooks"><a href="#Hooks" class="headerlink" title="Hooks"></a>Hooks</h2><h3 id="Creating-a-Search-Component"><a href="#Creating-a-Search-Component" class="headerlink" title="Creating a Search Component"></a>Creating a Search Component</h3><p><a href="https://btholt.github.io/complete-intro-to-react-v5/hooks" target="_blank" rel="noopener">notes</a></p>
<p><a href="https://btholt.github.io/complete-intro-to-react-v5/hooks-in-depth" target="_blank" rel="noopener">Hooks in Depth</a></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">touch ./src/SearchParams.js</span><br></pre></td></tr></table></figure>
<details><br><summary>SearchParams.js</summary><br><br><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> SearchParams = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> location = <span class="string">'Seattle, WA'</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div className=<span class="string">"search-params"</span>&gt;</span><br><span class="line">      &lt;form&gt;</span><br><span class="line">        &lt;label htmlFor=<span class="string">"location"</span>&gt;</span><br><span class="line">          Location</span><br><span class="line">          &lt;input id=<span class="string">"location"</span> value=&#123;location&#125; placeholder=<span class="string">"location"</span> /&gt;</span><br><span class="line">        &lt;<span class="regexp">/label&gt;</span></span><br><span class="line"><span class="regexp">        &lt;button&gt;Submint&lt;/</span>button&gt;</span><br><span class="line">      &lt;<span class="regexp">/form&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>div&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> SearchParams</span><br></pre></td></tr></table></figure><br><br></details>

<details><br><summary>App.js</summary><br><br><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">import</span> &#123; render &#125; <span class="keyword">from</span> <span class="string">'react-dom'</span></span><br><span class="line"><span class="keyword">import</span> SearchParams <span class="keyword">from</span> <span class="string">'./SearchParams'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> App = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;h1&gt;Adopt Me!<span class="xml"><span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">      &lt;SearchParams /&gt;</span><br><span class="line">    &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">  )</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">render(&lt;App /</span>&gt;, <span class="built_in">document</span>.getElementById(<span class="string">'root'</span>))</span><br></pre></td></tr></table></figure><br><br></details>

<h3 id="Setting-State-with-Hooks"><a href="#Setting-State-with-Hooks" class="headerlink" title="Setting State with Hooks"></a>Setting State with Hooks</h3><p>在更改<code>input</code>标签内容时，可以发现并没有改变，这是因为react在设计时没有选择双向数据绑定，需要用户自己操作数据的状态，而不是由框架进行处理。</p>
<p>此时我们需要引入<code>hooks</code>进行数据双向绑定(所有<code>hook</code>均以<code>use</code>开头)</p>
<details><br><summary>SearchParams.js</summary><br><br><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; useState &#125; <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> SearchParams = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> [location, setLocation] = useState(<span class="string">'Seattle, WA'</span>)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div className=<span class="string">"search-params"</span>&gt;</span><br><span class="line">      &lt;form&gt;</span><br><span class="line">        &lt;label htmlFor=<span class="string">"location"</span>&gt;</span><br><span class="line">          Location</span><br><span class="line">          &lt;input</span><br><span class="line">            id=<span class="string">"location"</span></span><br><span class="line">            value=&#123;location&#125;</span><br><span class="line">            placeholder=<span class="string">"location"</span></span><br><span class="line">            onChange=&#123;e =&gt; setLocation(e.target.value)&#125;</span><br><span class="line">          /&gt;</span><br><span class="line">        &lt;<span class="regexp">/label&gt;</span></span><br><span class="line"><span class="regexp">        &lt;button&gt;Submint&lt;/</span>button&gt;</span><br><span class="line">      &lt;<span class="regexp">/form&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>div&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> SearchParams</span><br></pre></td></tr></table></figure><br><br></details>

<h3 id="Best-Practice-for-Hooks"><a href="#Best-Practice-for-Hooks" class="headerlink" title="Best Practice for Hooks"></a>Best Practice for Hooks</h3><p>Hooks never go inside of if statements, and they never go inside for loops or anything like that.</p>
<h3 id="Configuring-ESLint-for-Hooks"><a href="#Configuring-ESLint-for-Hooks" class="headerlink" title="Configuring ESLint for Hooks"></a>Configuring ESLint for Hooks</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i -D eslint-plugin-react-hooks</span><br></pre></td></tr></table></figure>
<p><a href="https://www.npmjs.com/package/eslint-plugin-react-hooks" target="_blank" rel="noopener">eslint-plugin-react-hooks</a></p>
<details><br><summary>.eslintrc.json</summary><br><br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">"plugins": ["react", "import", "jsx-a11y", "react-hooks"],</span><br><span class="line">"rules": &#123;</span><br><span class="line">  "react/prop-types": 0,</span><br><span class="line">  "no-console": 1,</span><br><span class="line">  "react-hooks/rules-of-hooks": 2,</span><br><span class="line">  "react-hooks/exhaustive-deps": 1</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><br><br></details>

<p>开启之后将<code>hook</code>放入if语句中会看到如下警告:</p>
<blockquote>
<p>React Hook “useState” is called conditionally. React Hooks must be called in the exact same order in every component render.eslint(react-hooks/rules-of-hooks)</p>
</blockquote>
<h3 id="Calling-the-Pet-API"><a href="#Calling-the-Pet-API" class="headerlink" title="Calling the Pet API"></a>Calling the Pet API</h3><p><code>parcel</code>可以自动安装引用的npm包而不必手动安装</p>
<p>所以即可使用以下命令</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i @frontendmasters/pet</span><br></pre></td></tr></table></figure>
<p>也可只在js文件头部添加</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; ANIMALS &#125; <span class="keyword">from</span> <span class="string">'@frontendmasters/pet'</span></span><br></pre></td></tr></table></figure>
<details><br><summary>此时修改SearchParams.js如下</summary><br><br><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; useState &#125; <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">import</span> &#123; ANIMALS &#125; <span class="keyword">from</span> <span class="string">'@frontendmasters/pet'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> SearchParams = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> [location, setLocation] = useState(<span class="string">'Seattle, WA'</span>)</span><br><span class="line">  <span class="keyword">const</span> [animal, setAnimal] = useState(<span class="string">'dog'</span>)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div className=<span class="string">"search-params"</span>&gt;</span><br><span class="line">      &lt;form&gt;</span><br><span class="line">        &lt;label htmlFor=<span class="string">"location"</span>&gt;</span><br><span class="line">          Location</span><br><span class="line">          &lt;input</span><br><span class="line">            id=<span class="string">"location"</span></span><br><span class="line">            value=&#123;location&#125;</span><br><span class="line">            placeholder=<span class="string">"location"</span></span><br><span class="line">            onChange=&#123;e =&gt; setLocation(e.target.value)&#125;</span><br><span class="line">          /&gt;</span><br><span class="line">        &lt;<span class="regexp">/label&gt;</span></span><br><span class="line"><span class="regexp">        &lt;label htmlFor="animal"&gt;</span></span><br><span class="line"><span class="regexp">          Animal</span></span><br><span class="line"><span class="regexp">          &lt;select</span></span><br><span class="line"><span class="regexp">            id="animal"</span></span><br><span class="line"><span class="regexp">            value=&#123;animal&#125;</span></span><br><span class="line"><span class="regexp">            onChange=&#123;e =&gt; setAnimal(e.target.value)&#125;</span></span><br><span class="line"><span class="regexp">            onBlur=&#123;e =&gt; setAnimal(e.target.value)&#125;</span></span><br><span class="line"><span class="regexp">          &gt;</span></span><br><span class="line"><span class="regexp">            &lt;option&gt;All&lt;/</span>option&gt;</span><br><span class="line">            &#123;ANIMALS.map(<span class="function"><span class="params">animal</span> =&gt;</span> (</span><br><span class="line">              &lt;option value=&#123;animal&#125;&gt;&#123;animal&#125;&lt;<span class="regexp">/option&gt;</span></span><br><span class="line"><span class="regexp">            ))&#125;</span></span><br><span class="line"><span class="regexp">          &lt;/</span>select&gt;</span><br><span class="line">        &lt;<span class="regexp">/label&gt;</span></span><br><span class="line"><span class="regexp">        &lt;button&gt;Submit&lt;/</span>button&gt;</span><br><span class="line">      &lt;<span class="regexp">/form&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>div&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> SearchParams</span><br></pre></td></tr></table></figure><br><br></details>

<h3 id="Unique-List-Item-Keys"><a href="#Unique-List-Item-Keys" class="headerlink" title="Unique List Item Keys"></a>Unique List Item Keys</h3><p>可以看到，此时lint提示我们要添加`属性，这是为了在diff算法进行时提升性能的措施。</p>
<details><br><summary>此时修改SearchParams.js,给<code>&lt;option&gt;</code>添加<code>key</code>属性如下</summary><br><br><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; useState &#125; <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">import</span> &#123; ANIMALS &#125; <span class="keyword">from</span> <span class="string">'@frontendmasters/pet'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> SearchParams = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> [location, setLocation] = useState(<span class="string">'Seattle, WA'</span>)</span><br><span class="line">  <span class="keyword">const</span> [animal, setAnimal] = useState(<span class="string">'dog'</span>)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div className=<span class="string">"search-params"</span>&gt;</span><br><span class="line">      &lt;form&gt;</span><br><span class="line">        &lt;label htmlFor=<span class="string">"location"</span>&gt;</span><br><span class="line">          Location</span><br><span class="line">          &lt;input</span><br><span class="line">            id=<span class="string">"location"</span></span><br><span class="line">            value=&#123;location&#125;</span><br><span class="line">            placeholder=<span class="string">"location"</span></span><br><span class="line">            onChange=&#123;e =&gt; setLocation(e.target.value)&#125;</span><br><span class="line">          /&gt;</span><br><span class="line">        &lt;<span class="regexp">/label&gt;</span></span><br><span class="line"><span class="regexp">        &lt;label htmlFor="animal"&gt;</span></span><br><span class="line"><span class="regexp">          Animal</span></span><br><span class="line"><span class="regexp">          &lt;select</span></span><br><span class="line"><span class="regexp">            id="animal"</span></span><br><span class="line"><span class="regexp">            value=&#123;animal&#125;</span></span><br><span class="line"><span class="regexp">            onChange=&#123;e =&gt; setAnimal(e.target.value)&#125;</span></span><br><span class="line"><span class="regexp">            onBlur=&#123;e =&gt; setAnimal(e.target.value)&#125;</span></span><br><span class="line"><span class="regexp">          &gt;</span></span><br><span class="line"><span class="regexp">            &lt;option&gt;All&lt;/</span>option&gt;</span><br><span class="line">            &#123;ANIMALS.map(<span class="function"><span class="params">animal</span> =&gt;</span> (</span><br><span class="line">              &lt;option value=&#123;animal&#125; <span class="comment">/*这里添加了key属性*/</span>key=&#123;animal&#125;&gt;</span><br><span class="line">                &#123;animal&#125;</span><br><span class="line">              &lt;<span class="regexp">/option&gt;</span></span><br><span class="line"><span class="regexp">            ))&#125;</span></span><br><span class="line"><span class="regexp">          &lt;/</span>select&gt;</span><br><span class="line">        &lt;<span class="regexp">/label&gt;</span></span><br><span class="line"><span class="regexp">        &lt;button&gt;Submit&lt;/</span>button&gt;</span><br><span class="line">      &lt;<span class="regexp">/form&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>div&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> SearchParams</span><br></pre></td></tr></table></figure><br><br></details>

<h3 id="Breed-Dropdown"><a href="#Breed-Dropdown" class="headerlink" title="Breed Dropdown"></a>Breed Dropdown</h3><p>在form中添加breed选择标签</p>
<details><br><summary>searchParams.js</summary><br><br><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; useState &#125; <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">import</span> &#123; ANIMALS &#125; <span class="keyword">from</span> <span class="string">'@frontendmasters/pet'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> SearchParams = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> [location, setLocation] = useState(<span class="string">'Seattle, WA'</span>)</span><br><span class="line">  <span class="keyword">const</span> [animal, setAnimal] = useState(<span class="string">'dog'</span>)</span><br><span class="line">  <span class="keyword">const</span> [breed, setBreed] = useState(<span class="string">''</span>)</span><br><span class="line">  <span class="keyword">const</span> [breeds, setBreeds] = useState([])</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div className=<span class="string">"search-params"</span>&gt;</span><br><span class="line">      &lt;form&gt;</span><br><span class="line">        &lt;label htmlFor=<span class="string">"location"</span>&gt;</span><br><span class="line">          Location</span><br><span class="line">          &lt;input</span><br><span class="line">            id=<span class="string">"location"</span></span><br><span class="line">            value=&#123;location&#125;</span><br><span class="line">            placeholder=<span class="string">"location"</span></span><br><span class="line">            onChange=&#123;e =&gt; setLocation(e.target.value)&#125;</span><br><span class="line">            onBlur=&#123;e =&gt; setLocation(e.target.value)&#125;</span><br><span class="line">          /&gt;</span><br><span class="line">        &lt;<span class="regexp">/label&gt;</span></span><br><span class="line"><span class="regexp">        &lt;label htmlFor="animal"&gt;</span></span><br><span class="line"><span class="regexp">          Animal</span></span><br><span class="line"><span class="regexp">          &lt;select</span></span><br><span class="line"><span class="regexp">            id="animal"</span></span><br><span class="line"><span class="regexp">            value=&#123;animal&#125;</span></span><br><span class="line"><span class="regexp">            onChange=&#123;e =&gt; setAnimal(e.target.value)&#125;</span></span><br><span class="line"><span class="regexp">            onBlur=&#123;e =&gt; setAnimal(e.target.value)&#125;</span></span><br><span class="line"><span class="regexp">          &gt;</span></span><br><span class="line"><span class="regexp">            &lt;option&gt;All&lt;/</span>option&gt;</span><br><span class="line">            &#123;ANIMALS.map(<span class="function"><span class="params">animal</span> =&gt;</span> (</span><br><span class="line">              &lt;option value=&#123;animal&#125; key=&#123;animal&#125;&gt;</span><br><span class="line">                &#123;animal&#125;</span><br><span class="line">              &lt;<span class="regexp">/option&gt;</span></span><br><span class="line"><span class="regexp">            ))&#125;</span></span><br><span class="line"><span class="regexp">          &lt;/</span>select&gt;</span><br><span class="line">        &lt;<span class="regexp">/label&gt;</span></span><br><span class="line"><span class="regexp">        &lt;label htmlFor="breed"&gt;</span></span><br><span class="line"><span class="regexp">          breed</span></span><br><span class="line"><span class="regexp">          &lt;select</span></span><br><span class="line"><span class="regexp">            id="breed"</span></span><br><span class="line"><span class="regexp">            value=&#123;breed&#125;</span></span><br><span class="line"><span class="regexp">            onChange=&#123;e =&gt; setBreed(e.target.value)&#125;</span></span><br><span class="line"><span class="regexp">            onBlur=&#123;e =&gt; setBreed(e.target.value)&#125;</span></span><br><span class="line"><span class="regexp">            disabled=&#123;breeds.length === 0&#125;</span></span><br><span class="line"><span class="regexp">          &gt;</span></span><br><span class="line"><span class="regexp">            &lt;option&gt;All&lt;/</span>option&gt;</span><br><span class="line">            &#123;breeds.map(<span class="function"><span class="params">breedString</span> =&gt;</span> (</span><br><span class="line">              &lt;option key=&#123;breedString&#125; value=&#123;breedString&#125;&gt;</span><br><span class="line">                &#123;breedString&#125;</span><br><span class="line">              &lt;<span class="regexp">/option&gt;</span></span><br><span class="line"><span class="regexp">            ))&#125;</span></span><br><span class="line"><span class="regexp">          &lt;/</span>select&gt;</span><br><span class="line">        &lt;<span class="regexp">/label&gt;</span></span><br><span class="line"><span class="regexp">        &lt;button&gt;Submit&lt;/</span>button&gt;</span><br><span class="line">      &lt;<span class="regexp">/form&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>div&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> SearchParams</span><br></pre></td></tr></table></figure><br><br></details>

<h3 id="Custom-Hooks"><a href="#Custom-Hooks" class="headerlink" title="Custom Hooks"></a>Custom Hooks</h3><p>把animal标签和breed标签通过custom hooks抽离成公共方法</p>
<details><br><summary>新建useDropdown.js</summary><br><br><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; useState &#125; <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> useDropdown = <span class="function">(<span class="params">label, defaultState, options</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> [state, setState] = useState(defaultState)</span><br><span class="line">  <span class="keyword">const</span> id = <span class="string">`use-dropdown-<span class="subst">$&#123;label.replace(<span class="string">''</span>, <span class="string">''</span>).toLowerCase()&#125;</span>`</span></span><br><span class="line">  <span class="keyword">const</span> Dropdown = <span class="function"><span class="params">()</span> =&gt;</span> (</span><br><span class="line">    &lt;label htmlFor=&#123;id&#125;&gt;</span><br><span class="line">      &#123;label&#125;</span><br><span class="line">      &lt;select</span><br><span class="line">        id=&#123;id&#125;</span><br><span class="line">        value=&#123;state&#125;</span><br><span class="line">        onChange=&#123;e =&gt; setState(e.target.value)&#125;</span><br><span class="line">        onBlur=&#123;e =&gt; setState(e.target.value)&#125;</span><br><span class="line">        disabled=&#123;options.length === <span class="number">0</span>&#125;</span><br><span class="line">      &gt;</span><br><span class="line">        &lt;option&gt;All&lt;<span class="regexp">/option&gt;</span></span><br><span class="line"><span class="regexp">        &#123;options.map(item =&gt; (</span></span><br><span class="line"><span class="regexp">          &lt;option key=&#123;item&#125; value=&#123;item&#125;&gt;</span></span><br><span class="line"><span class="regexp">            &#123;item&#125;</span></span><br><span class="line"><span class="regexp">          &lt;/</span>option&gt;</span><br><span class="line">        ))&#125;</span><br><span class="line">      &lt;<span class="regexp">/select&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>label&gt;</span><br><span class="line">  )</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> [state, Dropdown, setState]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> useDropdown</span><br></pre></td></tr></table></figure><br><br></details>

<details><br><summary>修改SearchParams.js</summary><br><br><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; useState &#125; <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">import</span> &#123; ANIMALS &#125; <span class="keyword">from</span> <span class="string">'@frontendmasters/pet'</span></span><br><span class="line"><span class="keyword">import</span> useDropdown <span class="keyword">from</span> <span class="string">'./useDropdown'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> SearchParams = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> [location, setLocation] = useState(<span class="string">'Seattle, WA'</span>)</span><br><span class="line">  <span class="keyword">const</span> [breeds, setBreeds] = useState([])</span><br><span class="line">  <span class="comment">// const [animal, setAnimal] = useState('dog')</span></span><br><span class="line">  <span class="comment">// const [breed, setBreed] = useState('')</span></span><br><span class="line">  <span class="keyword">const</span> [animal, AnimalDropdown] = useDropdown(<span class="string">'Animal'</span>, <span class="string">'dog'</span>, ANIMALS)</span><br><span class="line">  <span class="keyword">const</span> [breed, BreedDropdown] = useDropdown(<span class="string">'Breed'</span>, <span class="string">''</span>, breeds)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div className=<span class="string">"search-params"</span>&gt;</span><br><span class="line">      &lt;form&gt;</span><br><span class="line">        &lt;label htmlFor=<span class="string">"location"</span>&gt;</span><br><span class="line">          Location</span><br><span class="line">          &lt;input</span><br><span class="line">            id=<span class="string">"location"</span></span><br><span class="line">            value=&#123;location&#125;</span><br><span class="line">            placeholder=<span class="string">"location"</span></span><br><span class="line">            onChange=&#123;e =&gt; setLocation(e.target.value)&#125;</span><br><span class="line">            onBlur=&#123;e =&gt; setLocation(e.target.value)&#125;</span><br><span class="line">          /&gt;</span><br><span class="line">        &lt;<span class="regexp">/label&gt;</span></span><br><span class="line"><span class="regexp">        &#123;/</span>* <span class="xml"><span class="tag">&lt;<span class="name">label</span> <span class="attr">htmlFor</span>=<span class="string">"animal"</span>&gt;</span></span></span><br><span class="line"><span class="xml">          Animal</span></span><br><span class="line">          &lt;select</span><br><span class="line">            id="animal"</span><br><span class="line">            value=&#123;animal&#125;</span><br><span class="line">            onChange=&#123;e =&gt; setAnimal(e.target.value)&#125;</span><br><span class="line">            onBlur=&#123;e =&gt; setAnimal(e.target.value)&#125;</span><br><span class="line">          &gt;</span><br><span class="line">            &lt;option&gt;All&lt;/option&gt;</span><br><span class="line">            &#123;ANIMALS.map(animal =&gt; (</span><br><span class="line">              &lt;option value=&#123;animal&#125; key=&#123;animal&#125;&gt;</span><br><span class="line">                &#123;animal&#125;</span><br><span class="line">              &lt;/option&gt;</span><br><span class="line">            ))&#125;</span><br><span class="line"><span class="xml">          <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span></span><br><span class="line">        &lt;label htmlFor=<span class="string">"breed"</span>&gt;</span><br><span class="line">          breed</span><br><span class="line">          &lt;select</span><br><span class="line">            id=<span class="string">"breed"</span></span><br><span class="line">            value=&#123;breed&#125;</span><br><span class="line">            onChange=&#123;e =&gt; setBreed(e.target.value)&#125;</span><br><span class="line">            onBlur=&#123;e =&gt; setBreed(e.target.value)&#125;</span><br><span class="line">            disabled=&#123;breeds.length === <span class="number">0</span>&#125;</span><br><span class="line">          &gt;</span><br><span class="line">            &lt;option&gt;All&lt;<span class="regexp">/option&gt;</span></span><br><span class="line"><span class="regexp">            &#123;breeds.map(breedString =&gt; (</span></span><br><span class="line"><span class="regexp">              &lt;option key=&#123;breedString&#125; value=&#123;breedString&#125;&gt;</span></span><br><span class="line"><span class="regexp">                &#123;breedString&#125;</span></span><br><span class="line"><span class="regexp">              &lt;/</span>option&gt;</span><br><span class="line">            ))&#125;</span><br><span class="line">          &lt;<span class="regexp">/select&gt;</span></span><br><span class="line"><span class="regexp">        &lt;/</span>label&gt; *<span class="regexp">/&#125;</span></span><br><span class="line"><span class="regexp">        &lt;AnimalDropdown /</span>&gt;</span><br><span class="line">        &lt;BreedDropdown /&gt;</span><br><span class="line">        &lt;button&gt;Submit&lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">      &lt;/</span>form&gt;</span><br><span class="line">    &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">  )</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">export default SearchParams</span></span><br></pre></td></tr></table></figure><br><br></details>

<h2 id="Effects"><a href="#Effects" class="headerlink" title="Effects"></a>Effects</h2><h3 id="useEffect"><a href="#useEffect" class="headerlink" title="useEffect"></a>useEffect</h3><p><a href="https://www.petfinder.com/" target="_blank" rel="noopener">petfinder</a></p>
<details><br><summary>SearchParams.js</summary><br><br><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; useState, useEffect &#125; <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">import</span> pet, &#123; ANIMALS &#125; <span class="keyword">from</span> <span class="string">'@frontendmasters/pet'</span></span><br><span class="line"><span class="keyword">import</span> useDropdown <span class="keyword">from</span> <span class="string">'./useDropdown'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> SearchParams = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> [location, setLocation] = useState(<span class="string">'Seattle, WA'</span>)</span><br><span class="line">  <span class="keyword">const</span> [breeds, setBreeds] = useState([])</span><br><span class="line">  <span class="keyword">const</span> [animal, AnimalDropdown] = useDropdown(<span class="string">'Animal'</span>, <span class="string">'dog'</span>, ANIMALS)</span><br><span class="line">  <span class="keyword">const</span> [breed, BreedDropdown] = useDropdown(<span class="string">'Breed'</span>, <span class="string">''</span>, breeds)</span><br><span class="line"></span><br><span class="line">  useEffect(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    setBreeds([])</span><br><span class="line">    setBreed(<span class="string">''</span>)</span><br><span class="line"></span><br><span class="line">    pet.breeds(animal).then(<span class="function">(<span class="params">&#123; breeds &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> breedStrings = breeds.map(<span class="function">(<span class="params">&#123; name &#125;</span>) =&gt;</span> name)</span><br><span class="line">      setBreeds(breedStrings)</span><br><span class="line">    &#125;, <span class="built_in">console</span>.error)</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div className=<span class="string">"search-params"</span>&gt;</span><br><span class="line">      &lt;form&gt;</span><br><span class="line">        &lt;label htmlFor=<span class="string">"location"</span>&gt;</span><br><span class="line">          Location</span><br><span class="line">          &lt;input</span><br><span class="line">            id=<span class="string">"location"</span></span><br><span class="line">            value=&#123;location&#125;</span><br><span class="line">            placeholder=<span class="string">"location"</span></span><br><span class="line">            onChange=&#123;e =&gt; setLocation(e.target.value)&#125;</span><br><span class="line">            onBlur=&#123;e =&gt; setLocation(e.target.value)&#125;</span><br><span class="line">          /&gt;</span><br><span class="line">        &lt;<span class="regexp">/label&gt;</span></span><br><span class="line"><span class="regexp">        &lt;AnimalDropdown /</span>&gt;</span><br><span class="line">        &lt;BreedDropdown /&gt;</span><br><span class="line">        &lt;button&gt;Submit&lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">      &lt;/</span>form&gt;</span><br><span class="line">    &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">  )</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">export default SearchParams</span></span><br></pre></td></tr></table></figure><br><br></details>

<h3 id="Declaring-Effect-Dependancies"><a href="#Declaring-Effect-Dependancies" class="headerlink" title="Declaring Effect Dependancies"></a>Declaring Effect Dependancies</h3><p>上述代码中，页面每次重新渲染都会从api重新获取数据，根据需求这明显没有必要，此时需要给<code>useEffect</code>添加参数，声明依赖，通过给<code>useEffect</code>传入一个数组作为第二个参数，数组的每一项为状态改变后需要从api重新获取数据的变量。</p>
<details><br><summary>SearchParams.js</summary><br><br><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; useState, useEffect &#125; <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">import</span> pet, &#123; ANIMALS &#125; <span class="keyword">from</span> <span class="string">'@frontendmasters/pet'</span></span><br><span class="line"><span class="keyword">import</span> useDropdown <span class="keyword">from</span> <span class="string">'./useDropdown'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> SearchParams = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> [location, setLocation] = useState(<span class="string">'Seattle, WA'</span>)</span><br><span class="line">  <span class="keyword">const</span> [breeds, setBreeds] = useState([])</span><br><span class="line">  <span class="keyword">const</span> [animal, AnimalDropdown] = useDropdown(<span class="string">'Animal'</span>, <span class="string">'dog'</span>, ANIMALS)</span><br><span class="line">  <span class="keyword">const</span> [breed, BreedDropdown, setBreed] = useDropdown(<span class="string">'Breed'</span>, <span class="string">''</span>, breeds)</span><br><span class="line"></span><br><span class="line">  useEffect(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    setBreeds([])</span><br><span class="line">    setBreed(<span class="string">''</span>)</span><br><span class="line"></span><br><span class="line">    pet.breeds(animal).then(<span class="function">(<span class="params">&#123; breeds &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> breedStrings = breeds.map(<span class="function">(<span class="params">&#123; name &#125;</span>) =&gt;</span> name)</span><br><span class="line">      setBreeds(breedStrings)</span><br><span class="line">    &#125;, <span class="built_in">console</span>.error)</span><br><span class="line">  &#125;, [animal, setBreed, setBreeds])</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div className=<span class="string">"search-params"</span>&gt;</span><br><span class="line">      &lt;form&gt;</span><br><span class="line">        &lt;label htmlFor=<span class="string">"location"</span>&gt;</span><br><span class="line">          Location</span><br><span class="line">          &lt;input</span><br><span class="line">            id=<span class="string">"location"</span></span><br><span class="line">            value=&#123;location&#125;</span><br><span class="line">            placeholder=<span class="string">"location"</span></span><br><span class="line">            onChange=&#123;e =&gt; setLocation(e.target.value)&#125;</span><br><span class="line">            onBlur=&#123;e =&gt; setLocation(e.target.value)&#125;</span><br><span class="line">          /&gt;</span><br><span class="line">        &lt;<span class="regexp">/label&gt;</span></span><br><span class="line"><span class="regexp">        &lt;AnimalDropdown /</span>&gt;</span><br><span class="line">        &lt;BreedDropdown /&gt;</span><br><span class="line">        &lt;button&gt;Submit&lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">      &lt;/</span>form&gt;</span><br><span class="line">    &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">  )</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">export default SearchParams</span></span><br></pre></td></tr></table></figure><br><br></details>

<h3 id="Effect-Lifecycle-Walkthrough"><a href="#Effect-Lifecycle-Walkthrough" class="headerlink" title="Effect Lifecycle Walkthrough"></a>Effect Lifecycle Walkthrough</h3><p>在<code>SeacrhParmas.js</code>中，<code>useEffect</code>是一个异步操作，在首次渲染中并不会执行，以提高首次渲染的速度。</p>
<p>在页面首次渲染完成后，会调用<code>useEffect</code>的第一个参数，也就是更新<code>breed</code>和<code>breeds</code>的函数。在执行完毕后，会监听<code>animal</code>,<code>setBreed</code>和<code>setBreeds</code>，也就是<code>useEffect</code>第二个参数的数组中的每一项的数据状态有没有改变，只有当参数数组中的数据状态改变时，才会重新调用第一个参数函数更新<code>breed</code>和<code>breeds</code>的数据。</p>
<h3 id="Run-Only-Once"><a href="#Run-Only-Once" class="headerlink" title="Run Only Once"></a>Run Only Once</h3><p>如果只想在首次加载时执行<code>useEffect</code>并只执行一次，可以将<code>useEffect</code>第二个参数设置为一个空数组。如果想在每次重渲染后执行，只设置一个参数即可（此时会一直调用api获取数据，不要这样做）。</p>
<h2 id="Dev-Tools"><a href="#Dev-Tools" class="headerlink" title="Dev Tools"></a>Dev Tools</h2><h3 id="Environment-Variables-amp-Strict-Mode"><a href="#Environment-Variables-amp-Strict-Mode" class="headerlink" title="Environment Variables &amp; Strict Mode"></a>Environment Variables &amp; Strict Mode</h3><h4 id="NODE-ENV-development"><a href="#NODE-ENV-development" class="headerlink" title="NODE_ENV=development"></a><code>NODE_ENV=development</code></h4><blockquote>
<p>React already has a lot of developer conveniences built into it out of the box. What’s better is that they automatically strip it out when you compile your code for production.<br>So how do you get the debugging conveniences then? Well, if you’re using Parcel.js, it will compile your development server with an environment variable of <code>NODE_ENV=development</code> and then when you run <code>parcel build &lt;entry point&gt;</code> it will automatically change that to <code>NODE_ENV=production</code> which is how all the extra weight gets stripped out.<br>Why is it important that we strip the debug stuff out? The dev bundle of React is quite a bit bigger and quite a bit slower than the production build. Make sure you’re compiling with the correct environmental variables or your users will suffer.</p>
</blockquote>
<h4 id="Strict-Mode"><a href="#Strict-Mode" class="headerlink" title="Strict Mode"></a>Strict Mode</h4><blockquote>
<p>React has a new strict mode. If you wrap your app in <code>&lt;React.Strict&gt;&lt;/React.Strict&gt;</code> it will give you additional warnings about things you shouldn’t be doing. I’m not teaching you anything that would trip warnings from <code>React.Strict</code> but it’s good to keep your team in line and not using legacy features or things that will be sooned be deprecated.</p>
</blockquote>
<h4 id="React-Browser-Dev-Tools"><a href="#React-Browser-Dev-Tools" class="headerlink" title="React Browser Dev Tools"></a>React Browser Dev Tools</h4><blockquote>
<p>React has wonderful dev tools that the core team maintains. They’re available for both Chromium-based browsers and Firefox. They let you do several things like explore your React app like a DOM tree, modify state and props on the fly to test things out, tease out performance problems, and programtically manipulate components. Definitely worth downloading now.</p>
</blockquote>
<p><a href="https://addons.mozilla.org/en-US/firefox/addon/react-devtools/" target="_blank" rel="noopener">Firefox React Dev Tools</a></p>
<p><a href="https://chrome.google.com/webstore/detail/react-developer-tools/fmkadmapgofadopljbjfkapdkoienihi?hl=en" target="_blank" rel="noopener">Chrome React Dev Tools</a></p>
<h2 id="Async-amp-Routing"><a href="#Async-amp-Routing" class="headerlink" title="Async &amp; Routing"></a>Async &amp; Routing</h2><h3 id="Asynchronous-API-Requests"><a href="#Asynchronous-API-Requests" class="headerlink" title="Asynchronous API Requests"></a>Asynchronous API Requests</h3><p><a href="https://btholt.github.io/complete-intro-to-react-v5/async" target="_blank" rel="noopener">notes</a></p>
<p><a href="https://frontendmasters.com/courses/js-recent-parts/async-functions/" target="_blank" rel="noopener">course async await</a></p>
<details><br><summary>SearchParams.js</summary><br><br><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; useState, useEffect &#125; <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">import</span> pet, &#123; ANIMALS &#125; <span class="keyword">from</span> <span class="string">'@frontendmasters/pet'</span></span><br><span class="line"><span class="keyword">import</span> useDropdown <span class="keyword">from</span> <span class="string">'./useDropdown'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> SearchParams = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> [location, setLocation] = useState(<span class="string">'Seattle, WA'</span>)</span><br><span class="line">  <span class="keyword">const</span> [breeds, setBreeds] = useState([])</span><br><span class="line">  <span class="keyword">const</span> [animal, AnimalDropdown] = useDropdown(<span class="string">'Animal'</span>, <span class="string">'dog'</span>, ANIMALS)</span><br><span class="line">  <span class="keyword">const</span> [breed, BreedDropdown, setBreed] = useDropdown(<span class="string">'Breed'</span>, <span class="string">''</span>, breeds)</span><br><span class="line">  <span class="keyword">const</span> [pets, setPets] = useState([]) <span class="comment">// add this</span></span><br><span class="line">  </span><br><span class="line">  <span class="comment">// add this</span></span><br><span class="line">  <span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">requestPets</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; animals &#125; = <span class="keyword">await</span> pet.animals(&#123;</span><br><span class="line">      location,</span><br><span class="line">      breed,</span><br><span class="line">      type: animal</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    setPets(animals || [])</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  useEffect(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    setBreeds([])</span><br><span class="line">    setBreed(<span class="string">''</span>)</span><br><span class="line"></span><br><span class="line">    pet.breeds(animal).then(<span class="function">(<span class="params">&#123; breeds &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> breedStrings = breeds.map(<span class="function">(<span class="params">&#123; name &#125;</span>) =&gt;</span> name)</span><br><span class="line">      setBreeds(breedStrings)</span><br><span class="line">    &#125;, <span class="built_in">console</span>.error)</span><br><span class="line">  &#125;, [animal, setBreed, setBreeds])</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div className=<span class="string">"search-params"</span>&gt;</span><br><span class="line">      &lt;form</span><br><span class="line">        onSubmit=&#123;e =&gt; &#123; <span class="comment">//add this</span></span><br><span class="line">          e.preventDefault()</span><br><span class="line">          requestPets()</span><br><span class="line">        &#125;&#125;</span><br><span class="line">      &gt;</span><br><span class="line">        &lt;label htmlFor=<span class="string">"location"</span>&gt;</span><br><span class="line">          Location</span><br><span class="line">          &lt;input</span><br><span class="line">            id=<span class="string">"location"</span></span><br><span class="line">            value=&#123;location&#125;</span><br><span class="line">            placeholder=<span class="string">"location"</span></span><br><span class="line">            onChange=&#123;e =&gt; setLocation(e.target.value)&#125;</span><br><span class="line">            onBlur=&#123;e =&gt; setLocation(e.target.value)&#125;</span><br><span class="line">          /&gt;</span><br><span class="line">        &lt;<span class="regexp">/label&gt;</span></span><br><span class="line"><span class="regexp">        &lt;AnimalDropdown /</span>&gt;</span><br><span class="line">        &lt;BreedDropdown /&gt;</span><br><span class="line">        &lt;button&gt;Submit&lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">      &lt;/</span>form&gt;</span><br><span class="line">    &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">  )</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">export default SearchParams</span></span><br></pre></td></tr></table></figure><br><br></details>

<details><br><summary>在package.json添加浏览器支持</summary><br><br><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"name"</span>: <span class="string">"adopt-me"</span>,</span><br><span class="line">  <span class="attr">"version"</span>: <span class="string">"1.0.0"</span>,</span><br><span class="line">  <span class="attr">"description"</span>: <span class="string">""</span>,</span><br><span class="line">  <span class="attr">"main"</span>: <span class="string">"index.js"</span>,</span><br><span class="line">  <span class="attr">"scripts"</span>: &#123;</span><br><span class="line">    <span class="attr">"dev"</span>: <span class="string">"parcel src/index.html"</span>,</span><br><span class="line">    <span class="attr">"format"</span>: <span class="string">"prettier \"src/**/*.&#123;js,html&#125;\" --write"</span>,</span><br><span class="line">    <span class="attr">"lint"</span>: <span class="string">"eslint \"src/**/*.&#123;js,jsx&#125;\" --quiet"</span>,</span><br><span class="line">    <span class="attr">"test"</span>: <span class="string">"echo \"Error: no test specified\" &amp;&amp; exit 1"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"keywords"</span>: [],</span><br><span class="line">  <span class="attr">"author"</span>: <span class="string">""</span>,</span><br><span class="line">  <span class="attr">"license"</span>: <span class="string">"ISC"</span>,</span><br><span class="line">  <span class="attr">"devDependencies"</span>: &#123;</span><br><span class="line">    <span class="attr">"babel-eslint"</span>: <span class="string">"^10.0.1"</span>,</span><br><span class="line">    <span class="attr">"eslint"</span>: <span class="string">"^5.16.0"</span>,</span><br><span class="line">    <span class="attr">"eslint-config-prettier"</span>: <span class="string">"^4.3.0"</span>,</span><br><span class="line">    <span class="attr">"eslint-plugin-import"</span>: <span class="string">"^2.17.3"</span>,</span><br><span class="line">    <span class="attr">"eslint-plugin-jsx-a11y"</span>: <span class="string">"^6.2.1"</span>,</span><br><span class="line">    <span class="attr">"eslint-plugin-react"</span>: <span class="string">"^7.13.0"</span>,</span><br><span class="line">    <span class="attr">"eslint-plugin-react-hooks"</span>: <span class="string">"^1.6.0"</span>,</span><br><span class="line">    <span class="attr">"parcel-bundler"</span>: <span class="string">"^1.12.3"</span>,</span><br><span class="line">    <span class="attr">"prettier"</span>: <span class="string">"^1.17.1"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"dependencies"</span>: &#123;</span><br><span class="line">    <span class="attr">"@frontendmasters/pet"</span>: <span class="string">"^1.0.3"</span>,</span><br><span class="line">    <span class="attr">"react"</span>: <span class="string">"^16.8.6"</span>,</span><br><span class="line">    <span class="attr">"react-dom"</span>: <span class="string">"^16.8.6"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"browserslist"</span>: [</span><br><span class="line">    <span class="string">"last 2 Chrome versions"</span>,</span><br><span class="line">    <span class="string">"last 2 ChromeAndroid versions"</span>,</span><br><span class="line">    <span class="string">"last 2 Firefox versions"</span>,</span><br><span class="line">    <span class="string">"last 2 FirefoxAndroid versions"</span>,</span><br><span class="line">    <span class="string">"last 2 Safari versions"</span>,</span><br><span class="line">    <span class="string">"last 2 iOS versions"</span>,</span><br><span class="line">    <span class="string">"last 2 Edge versions"</span>,</span><br><span class="line">    <span class="string">"last 2 Opera versions"</span>,</span><br><span class="line">    <span class="string">"last 2 OperaMobile versions"</span></span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><br></details>

<h3 id="Use-the-Fallback-Mock-API"><a href="#Use-the-Fallback-Mock-API" class="headerlink" title="Use the Fallback Mock API"></a>Use the Fallback Mock API</h3><p>之前的数据都是通过互联网请求获取的，下面安装mock API，从本地获取数据</p>
<p>首先安装npm包</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i -D cross-env</span><br></pre></td></tr></table></figure>
<p>给package.json添加如下指令</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">"dev:mock": "cross-env PET_MOCK=mock npm run dev"</span><br></pre></td></tr></table></figure>
<h3 id="One-Way-Data-Flow"><a href="#One-Way-Data-Flow" class="headerlink" title="One-Way Data Flow"></a>One-Way Data Flow</h3><p>新建<code>Results</code>组件，更改<code>SearchParams.js</code>如下</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// at top</span></span><br><span class="line"><span class="keyword">import</span> Results <span class="keyword">from</span> <span class="string">"./Results"</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// under &lt;/form&gt;, still inside the div</span></span><br><span class="line">&lt;Results pets=&#123;pets&#125; /&gt;;</span><br></pre></td></tr></table></figure>
<p>React的数据会从父组件传递到子组件(One-Way Data Flow)，反之并不成立。</p>
<details><br><summary>新建<code>Results.js</code></summary><br><br><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">import</span> Pet <span class="keyword">from</span> <span class="string">'./Pet'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> Results = <span class="function">(<span class="params">&#123; pets &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div className=<span class="string">"search"</span>&gt;</span><br><span class="line">      &#123;pets.length === <span class="number">0</span> ? (</span><br><span class="line">        &lt;h1&gt;No Pets Found&lt;<span class="regexp">/h1&gt;</span></span><br><span class="line"><span class="regexp">      ) : (</span></span><br><span class="line"><span class="regexp">        pets.map(pet =&gt; (</span></span><br><span class="line"><span class="regexp">          &lt;Pet</span></span><br><span class="line"><span class="regexp">            animal=&#123;pet.type&#125;</span></span><br><span class="line"><span class="regexp">            key=&#123;pet.id&#125;</span></span><br><span class="line"><span class="regexp">            name=&#123;pet.name&#125;</span></span><br><span class="line"><span class="regexp">            breed=&#123;pet.breeds.primary&#125;</span></span><br><span class="line"><span class="regexp">            media=&#123;pet.photos&#125;</span></span><br><span class="line"><span class="regexp">            location=&#123;`$&#123;pet.contact.address.city&#125;,$&#123;</span></span><br><span class="line"><span class="regexp">              pet.contact.address.state</span></span><br><span class="line"><span class="regexp">            &#125;`&#125;</span></span><br><span class="line"><span class="regexp">            id=&#123;pet.id&#125;</span></span><br><span class="line"><span class="regexp">          /</span>&gt;</span><br><span class="line">        ))</span><br><span class="line">      )&#125;</span><br><span class="line">    &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">  )</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">export default Results</span></span><br></pre></td></tr></table></figure><br><br></details>

<h3 id="Reformatting-the-Pet-Component"><a href="#Reformatting-the-Pet-Component" class="headerlink" title="Reformatting the Pet Component"></a>Reformatting the Pet Component</h3><details><br><summary>Pet.js</summary><br><br><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">Pet</span>(<span class="params">&#123; name, animal, breed, media, location, id &#125;</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> hero = <span class="string">'http://placecorgi.com/300/300'</span></span><br><span class="line">  <span class="keyword">if</span> (media.length) &#123;</span><br><span class="line">    hero = media[<span class="number">0</span>].small</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;a href=&#123;<span class="string">`/details/<span class="subst">$&#123;id&#125;</span>`</span>&#125; className=<span class="string">"pet"</span>&gt;</span><br><span class="line">      &lt;div className=<span class="string">"image-container"</span>&gt;</span><br><span class="line">        &lt;img src=&#123;hero&#125; alt=&#123;name&#125; /&gt;</span><br><span class="line">      &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">      &lt;div className="info"&gt;</span></span><br><span class="line"><span class="regexp">        &lt;h1&gt;&#123;name&#125;&lt;/</span>h1&gt;</span><br><span class="line">        &lt;h2&gt;&#123;<span class="string">`<span class="subst">$&#123;animal&#125;</span> - <span class="subst">$&#123;breed&#125;</span> - <span class="subst">$&#123;location&#125;</span>`</span>&#125;&lt;<span class="regexp">/h2&gt;</span></span><br><span class="line"><span class="regexp">      &lt;/</span>div&gt;</span><br><span class="line">    &lt;<span class="regexp">/a&gt;</span></span><br><span class="line"><span class="regexp">  )</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure><br><br></details>

<h3 id="Reach-Router"><a href="#Reach-Router" class="headerlink" title="Reach Router"></a>Reach Router</h3><p><a href="https://frontarm.com/navi/en/" target="_blank" rel="noopener">Navi-Declarative, asynchronous routing for React.</a></p>
<p><a href="https://reacttraining.com/react-router/" target="_blank" rel="noopener">react-router</a></p>
<p><a href="https://github.com/reach/router" target="_blank" rel="noopener">reach/router</a></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">touch ./src/Details.js</span><br></pre></td></tr></table></figure>
<details><br><summary>Details.js</summary><br><br><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> Details = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Details<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> Details</span><br></pre></td></tr></table></figure><br><br></details>

<details><br><summary>App.js</summary><br><br><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// at top</span></span><br><span class="line"><span class="keyword">import</span> &#123; Router &#125; <span class="keyword">from</span> <span class="string">"@reach/router"</span>;</span><br><span class="line"><span class="keyword">import</span> Details <span class="keyword">from</span> <span class="string">"./Details"</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// replace &lt;Results /&gt;</span></span><br><span class="line">&lt;Router&gt;</span><br><span class="line">  &lt;SearchParams path=<span class="string">"/"</span> /&gt;</span><br><span class="line">  &lt;Details path=<span class="string">"/details/:id"</span> /&gt;</span><br><span class="line">&lt;<span class="regexp">/Router&gt;;</span></span><br></pre></td></tr></table></figure><br><br></details>

<h3 id="Debugging-amp-Reach-Router-Link"><a href="#Debugging-amp-Reach-Router-Link" class="headerlink" title="Debugging &amp; Reach Router Link"></a>Debugging &amp; Reach Router Link</h3><p>可以在<code>Details.js</code>中，使用<code>&lt;pre&gt;</code>和<code>&lt;code&gt;</code>标签包裹<code>Json.stringify()</code>在页面显示变量对象，也可以在DevTools中查看</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Details = <span class="function"><span class="params">props</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;pre&gt;</span><br><span class="line">      &lt;code&gt;&#123;<span class="built_in">JSON</span>.stringify(props, <span class="literal">null</span>, <span class="number">2</span>)&#125;&lt;<span class="regexp">/code&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>pre&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>更改<code>app.js</code>，添加<code>&lt;link&gt;</code></p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// import Link too</span></span><br><span class="line"><span class="keyword">import</span> &#123; Router, Link &#125; <span class="keyword">from</span> <span class="string">"@reach/router"</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// replace h1</span></span><br><span class="line">&lt;header&gt;</span><br><span class="line">  &lt;Link to=<span class="string">"/"</span>&gt;Adopt Me!<span class="xml"><span class="tag">&lt;/<span class="name">Link</span>&gt;</span></span></span><br><span class="line">&lt;<span class="regexp">/header&gt;;</span></span><br></pre></td></tr></table></figure>
<h2 id="Class-Components"><a href="#Class-Components" class="headerlink" title="Class Components"></a>Class Components</h2><h3 id="React-Class-Components"><a href="#React-Class-Components" class="headerlink" title="React Class Components"></a>React Class Components</h3><details><br><summary>Details.js</summary><br><br><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">import</span> pet <span class="keyword">from</span> <span class="string">'@frontendmasters/pet'</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Details</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(props) &#123;</span><br><span class="line">    <span class="keyword">super</span>(props)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>.state = &#123;</span><br><span class="line">      loading: <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 不能在class中使用hooks</span></span><br><span class="line">  componentDidMount() &#123;</span><br><span class="line">    pet.animal(<span class="keyword">this</span>.props.id).then(<span class="function">(<span class="params">&#123; animal &#125;</span>) =&gt;</span> &#123; <span class="comment">// 为了保持this的指向，这里最好使用箭头函数</span></span><br><span class="line">      <span class="keyword">this</span>.setState(&#123;</span><br><span class="line">        name: animal.name,</span><br><span class="line">        animal: animal.type,</span><br><span class="line">        location: <span class="string">`<span class="subst">$&#123;animal.contact.address.city&#125;</span> , <span class="subst">$&#123;</span></span></span><br><span class="line"><span class="string"><span class="subst">          animal.contact.address.state</span></span></span><br><span class="line"><span class="string"><span class="subst">        &#125;</span>`</span>,</span><br><span class="line">        description: animal.description,</span><br><span class="line">        media: animal.photos,</span><br><span class="line">        breed: animal.breeds.primary,</span><br><span class="line">        loading: <span class="literal">false</span></span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="comment">//每个class component都必须有一个render方法</span></span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> Details</span><br></pre></td></tr></table></figure><br><br></details>

<h3 id="Rendering-the-Component"><a href="#Rendering-the-Component" class="headerlink" title="Rendering the Component"></a>Rendering the Component</h3><details><br><summary>Details.js</summary><br><br><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">import</span> pet <span class="keyword">from</span> <span class="string">'@frontendmasters/pet'</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Details</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(props) &#123;</span><br><span class="line">    <span class="keyword">super</span>(props)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>.state = &#123;</span><br><span class="line">      loading: <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 不能在class中使用hooks</span></span><br><span class="line">  componentDidMount() &#123;</span><br><span class="line">    pet</span><br><span class="line">      .animal(<span class="keyword">this</span>.props.id)</span><br><span class="line">      .then(<span class="function">(<span class="params">&#123; animal &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">this</span>.setState(&#123;</span><br><span class="line">          name: animal.name,</span><br><span class="line">          animal: animal.type,</span><br><span class="line">          location: <span class="string">`<span class="subst">$&#123;animal.contact.address.city&#125;</span>, <span class="subst">$&#123;</span></span></span><br><span class="line"><span class="string"><span class="subst">            animal.contact.address.state</span></span></span><br><span class="line"><span class="string"><span class="subst">          &#125;</span>`</span>,</span><br><span class="line">          description: animal.description,</span><br><span class="line">          media: animal.photos,</span><br><span class="line">          breed: animal.breeds.primary,</span><br><span class="line">          loading: <span class="literal">false</span></span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;)</span><br><span class="line">      .catch(<span class="function"><span class="params">err</span> =&gt;</span> <span class="keyword">this</span>.setState(&#123; <span class="attr">error</span>: err &#125;))</span><br><span class="line">  &#125;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="comment">//每个class component都必须有一个render方法</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.state.loading) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>loading … <span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> &#123; animal, breed, location, description, name &#125; = <span class="keyword">this</span>.state</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div className=<span class="string">"details"</span>&gt;</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">          &lt;h1&gt;&#123;name&#125;&lt;<span class="regexp">/h1&gt;</span></span><br><span class="line"><span class="regexp">          &lt;h2&gt;&#123;`$&#123;animal&#125; — $&#123;breed&#125; — $&#123;location&#125;`&#125;&lt;/</span>h2&gt;</span><br><span class="line">          &lt;button&gt;Adopt &#123;name&#125;&lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">          &lt;p&gt;&#123;description&#125;&lt;/</span>p&gt;</span><br><span class="line">        &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">      &lt;/</span>div&gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> Details</span><br></pre></td></tr></table></figure><br><br></details>

<h3 id="Configuring-Babel-for-Parcel"><a href="#Configuring-Babel-for-Parcel" class="headerlink" title="Configuring Babel for Parcel"></a>Configuring Babel for Parcel</h3><p>更具js的class语法，在class component组件中要加入如下代码：</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Details</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(props) &#123;</span><br><span class="line">    <span class="keyword">super</span>(props)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>.state = &#123;</span><br><span class="line">      loading: <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>毫无疑问，这会加重我们的心智负担，我们希望将上述代码直接改写如下：</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Details</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">component</span> </span>&#123;</span><br><span class="line">  state = &#123;</span><br><span class="line">    loading: <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>直接运行会报错</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Support <span class="keyword">for</span> the experimental syntax <span class="string">'classProperties'</span> isn<span class="string">'t currently enabled (5:9)</span></span><br></pre></td></tr></table></figure>
<p>所以要启用babel和parcel的一些设置。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -D babel-eslint @babel/core @babel/preset-env @babel/plugin-proposal-class-properties @babel/preset-react</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">touch ./.babelrc</span><br></pre></td></tr></table></figure>
<details><br><summary>.babelrc</summary><br><br><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"presets"</span>: [<span class="string">"@babel/preset-react"</span>, <span class="string">"@babel/preset-env"</span>],</span><br><span class="line">  <span class="attr">"plugins"</span>: [<span class="string">"@babel/plugin-proposal-class-properties"</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><br></details>

<p>在<code>.eslintrc.json</code>中添加<code>&quot;parser&quot;: &quot;babel-eslint&quot;,</code></p>
<p>上述步骤完成后，就可以启用这个新语法了。</p>
<h3 id="Creating-an-Image-Carousel"><a href="#Creating-an-Image-Carousel" class="headerlink" title="Creating an Image Carousel"></a>Creating an Image Carousel</h3><details><br><summary>Carousel.js</summary><br><br><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Carousel</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  state = &#123;</span><br><span class="line">    photos: [],</span><br><span class="line">    active: <span class="number">0</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">static</span> getDerivedStateFromProps(&#123; media &#125;) &#123;</span><br><span class="line">    <span class="keyword">let</span> photos = [<span class="string">'http://placecorgi.com/600/600'</span>]</span><br><span class="line">    <span class="keyword">if</span> (media.length) &#123;</span><br><span class="line">      photos = media.map(<span class="function">(<span class="params">&#123; large &#125;</span>) =&gt;</span> large)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> &#123; photos &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; photos, active &#125; = <span class="keyword">this</span>.state</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div className=<span class="string">"carousel"</span>&gt;</span><br><span class="line">        &lt;img src=&#123;photos[active]&#125; alt=<span class="string">"an animal"</span> /&gt;</span><br><span class="line">        &lt;div className=<span class="string">"carousel-smaller"</span>&gt;</span><br><span class="line">          &#123;photos.map(<span class="function">(<span class="params">photo, index</span>) =&gt;</span> (</span><br><span class="line">            <span class="comment">// eslint-disable-next-line</span></span><br><span class="line">            &lt;img</span><br><span class="line">              key=&#123;photo&#125;</span><br><span class="line">              onClick=&#123;<span class="keyword">this</span>.handelIndexClick&#125;</span><br><span class="line">              data-index=&#123;index&#125;</span><br><span class="line">              src=&#123;photo&#125;</span><br><span class="line">              className=&#123;index === active ? <span class="string">'active'</span> : <span class="string">''</span>&#125;</span><br><span class="line">              alt=<span class="string">"animal thumbnail"</span></span><br><span class="line">            /&gt;</span><br><span class="line">          ))&#125;</span><br><span class="line">        &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">      &lt;/</span>div&gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> Carousel</span><br></pre></td></tr></table></figure><br><br></details>

<h3 id="Context-Problem"><a href="#Context-Problem" class="headerlink" title="Context Problem"></a>Context Problem</h3><p>在<code>Carousel.js</code>中，如果我们直接将<code>handelIndexClick</code>方法写为如下代码：</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Carousel</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  state = &#123;</span><br><span class="line">    photos: [],</span><br><span class="line">    active: <span class="number">0</span></span><br><span class="line">  &#125;</span><br><span class="line">  handelIndexClick(event) &#123;</span><br><span class="line">    <span class="keyword">this</span>.setState(&#123; <span class="comment">// 这里的this指向的不是Carousel组件，而是其他的什么东西</span></span><br><span class="line">      active: event.target.dataset.index <span class="comment">// 这里Dom的dataset返回的属性会是字符串，需要转换为数字</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>会有如上两个问题。</p>
<p>所以可以将如上代码改写为</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Carousel</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span> (props) &#123;</span><br><span class="line">    <span class="keyword">super</span>(props)</span><br><span class="line">    <span class="keyword">this</span>.state = &#123;</span><br><span class="line">      photos: [],</span><br><span class="line">      active: <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">this</span>.handelIndexClick = <span class="keyword">this</span>.handelIndexClick.bind(<span class="keyword">this</span>) <span class="comment">// 显式绑定this指向</span></span><br><span class="line">  &#125;</span><br><span class="line">  handelIndexClick(event) &#123;</span><br><span class="line">    <span class="keyword">this</span>.setState(&#123;</span><br><span class="line">      active: +event.target.dataset.index <span class="comment">// 通过+运算符，强制类型转换为数字</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>我们可以用更为简洁的写法</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Carousel</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  state = &#123;</span><br><span class="line">    photos: [],</span><br><span class="line">    active: <span class="number">0</span></span><br><span class="line">  &#125;</span><br><span class="line">  handelIndexClick = <span class="function"><span class="params">event</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">this</span>.setState(&#123;</span><br><span class="line">      active: +event.target.dataset.index</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>因为箭头函数并不会创造新的执行上下文，而是会继承上级作用域函数的执行上下文，所以这里的this指向了Carousel</p>
<p><em>所以当传入函数进入子函数或者进行事件监听时，使用箭头函数，来避免this指向为其他对象</em>。</p>
<p>在React中，<code>componentDidMount</code>和<code>render</code>方法的<code>this</code>指向的执行上下文已经为当前组件。</p>
<h3 id="Carousel-Implementation"><a href="#Carousel-Implementation" class="headerlink" title="Carousel Implementation"></a>Carousel Implementation</h3><p>将Carousel组件添加到Detail页面：</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// import at top</span></span><br><span class="line"><span class="keyword">import</span> Carousel <span class="keyword">from</span> <span class="string">"./Carousel"</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// first component inside div.details</span></span><br><span class="line">&lt;Carousel media=&#123;media&#125; /&gt;;</span><br></pre></td></tr></table></figure>
<h3 id="Error-Boundaries"><a href="#Error-Boundaries" class="headerlink" title="Error Boundaries"></a>Error Boundaries</h3><p><a href="https://zh-hans.reactjs.org/docs/error-boundaries.html#introducing-error-boundaries" target="_blank" rel="noopener">错误边界（Error Boundaries）</a></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">touch ./src/ErrorBoundary.js</span><br></pre></td></tr></table></figure>
<details><br><summary>ErrorBoundary.js</summary><br><br><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// mostly code from https://zh-hans.reactjs.org/docs/error-boundaries.html</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">import</span> &#123; Link &#125; <span class="keyword">from</span> <span class="string">'@reach/router'</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ErrorBoundary</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  state = &#123;</span><br><span class="line">    hasError: <span class="literal">false</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">static</span> getDerivedStateFromError() &#123;</span><br><span class="line">    <span class="comment">// Update state so the next render will show the fallback UI.</span></span><br><span class="line">    <span class="keyword">return</span> &#123; <span class="attr">hasError</span>: <span class="literal">true</span> &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  componentDidCatch(error, info) &#123;</span><br><span class="line">    <span class="comment">// You can also log the error to an error reporting service</span></span><br><span class="line">    <span class="built_in">console</span>.error(<span class="string">'ErrorBoundary caught an error'</span>, error, info)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.state.hasError) &#123;</span><br><span class="line">      <span class="comment">// You can render any custom fallback UI</span></span><br><span class="line">      <span class="keyword">return</span> (</span><br><span class="line">        &lt;h1&gt;</span><br><span class="line">          There was an error <span class="keyword">with</span> <span class="keyword">this</span> listing. &lt;Link to=<span class="string">"/"</span>&gt;Click here&lt;<span class="regexp">/Link&gt;&#123;' '&#125;</span></span><br><span class="line"><span class="regexp">          to back to the home page or wait five seconds.</span></span><br><span class="line"><span class="regexp">        &lt;/</span>h1&gt;</span><br><span class="line">      )</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.props.children</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> ErrorBoundary</span><br></pre></td></tr></table></figure><br><br></details>

<h3 id="Error-Boundary-Middleware"><a href="#Error-Boundary-Middleware" class="headerlink" title="Error Boundary Middleware"></a>Error Boundary Middleware</h3><p>Details.js:</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// add import</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// replace export</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">DetailsWithErrorBoundary</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;ErrorBoundary&gt;</span><br><span class="line">     &#123;<span class="comment">/* 使用扩展运算符传递props对象参数 */</span>&#125;</span><br><span class="line">      &lt;Details &#123;...props&#125; /&gt;</span><br><span class="line">    &lt;<span class="regexp">/ErrorBoundary&gt;</span></span><br><span class="line"><span class="regexp">  );</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure>
<h3 id="404-Page-Redirect"><a href="#404-Page-Redirect" class="headerlink" title="404 Page Redirect"></a>404 Page Redirect</h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// top</span></span><br><span class="line"><span class="keyword">import</span> &#123; Link, Redirect &#125; <span class="keyword">from</span> <span class="string">"@reach/router"</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// add redirect</span></span><br><span class="line"><span class="keyword">this</span>.state = &#123; <span class="attr">hasError</span>: <span class="literal">false</span>, <span class="attr">redirect</span>: <span class="literal">false</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// under componentDidCatch</span></span><br><span class="line">componentDidUpdate() &#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">this</span>.state.hasError) &#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> <span class="keyword">this</span>.setState(&#123; <span class="attr">redirect</span>: <span class="literal">true</span> &#125;), <span class="number">5000</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// first thing inside render</span></span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">this</span>.state.redirect) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">Redirect</span> <span class="attr">to</span>=<span class="string">"/"</span> /&gt;</span>;</span></span><br><span class="line"><span class="xml">&#125;</span></span><br></pre></td></tr></table></figure>
<h2 id="Context"><a href="#Context" class="headerlink" title="Context"></a>Context</h2><h3 id="React-Context"><a href="#React-Context" class="headerlink" title="React Context"></a>React Context</h3><p><a href="https://btholt.github.io/complete-intro-to-react-v5/context" target="_blank" rel="noopener">Notes</a></p>
<blockquote>
<p>What is context? Context is like state, but instead of being confined to a component, it’s global to your application. It’s application-level state. This is dangerous. Avoid using context until you have to use it. One of React’s primary benefit is it makes the flow of data obvious by being explicit. This can make it cumbersome at times but it’s worth it because your code stays legible and understandable. Things like context obscure it.<br>Context (mostly) replaces Redux. Well, typically. It fills the same need as Redux. I really can’t see why you would need to use both. Use one or the other.</p>
</blockquote>
<p><a href="https://redux.js.org/" target="_blank" rel="noopener">redux</a></p>
<p><a href="https://zh-hans.reactjs.org/docs/context.html" target="_blank" rel="noopener">Context 提供了一个无需为每层组件手动添加 props，就能在组件树间进行数据传递的方法。</a></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">touch ./src/ThemeContext.js</span><br></pre></td></tr></table></figure>
<details><br><summary>ThemeContext.js</summary><br><br><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createContext &#125; <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> ThemeContext = createContext([<span class="string">'green'</span>, () =&gt; &#123;&#125;])</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> ThemeContext</span><br></pre></td></tr></table></figure><br><br></details>

<details><br><summary>App.js</summary><br><br><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// import useState and ThemeContext</span></span><br><span class="line"><span class="keyword">import</span> React, &#123; useState &#125; <span class="keyword">from</span> <span class="string">"react"</span>;</span><br><span class="line"><span class="keyword">import</span> ThemeContext <span class="keyword">from</span> <span class="string">"./ThemeContext"</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// top of App function body</span></span><br><span class="line"><span class="keyword">const</span> theme = useState(<span class="string">"darkblue"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// wrap the rest of the app</span></span><br><span class="line">&lt;ThemeContext.Provider value=&#123;theme&#125;&gt;</span><br><span class="line">  […]</span><br><span class="line">&lt;<span class="regexp">/ThemeContext&gt;</span></span><br></pre></td></tr></table></figure><br><br></details>

<h3 id="Context-with-Hooks"><a href="#Context-with-Hooks" class="headerlink" title="Context with Hooks"></a>Context with Hooks</h3><details><br><summary>SearchParams.js</summary><br><br><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// import at top</span></span><br><span class="line"><span class="keyword">import</span> ThemeContext <span class="keyword">from</span> <span class="string">"./ThemeContext"</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// top of SearchParams function body</span></span><br><span class="line"><span class="keyword">const</span> [theme] = useContext(ThemeContext);</span><br><span class="line"></span><br><span class="line"><span class="comment">// replace button</span></span><br><span class="line">&lt;button style=&#123;&#123; <span class="attr">backgroundColor</span>: theme &#125;&#125;&gt;Submit&lt;<span class="regexp">/button&gt;;</span></span><br></pre></td></tr></table></figure><br><br></details>

<h3 id="Context-with-Classes"><a href="#Context-with-Classes" class="headerlink" title="Context with Classes"></a>Context with Classes</h3><details><br><summary>Details.js</summary><br><br><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// import</span></span><br><span class="line"><span class="keyword">import</span> ThemeContext <span class="keyword">from</span> <span class="string">"./ThemeContext"</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// replace button</span></span><br><span class="line">&lt;ThemeContext.Consumer&gt;</span><br><span class="line">  &#123;([theme]) =&gt; (</span><br><span class="line">    &lt;button style=&#123;&#123; <span class="attr">backgroundColor</span>: theme &#125;&#125; onClick=&#123;<span class="keyword">this</span>.toggleModal&#125;&gt;</span><br><span class="line">      Adopt &#123;name&#125;</span><br><span class="line">    &lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">  )&#125;</span></span><br><span class="line"><span class="regexp">&lt;/</span>ThemeContext.Consumer&gt;;</span><br></pre></td></tr></table></figure><br><br></details>

<h3 id="Persisting-State-with-Context-Hooks"><a href="#Persisting-State-with-Context-Hooks" class="headerlink" title="Persisting State with Context Hooks"></a>Persisting State with Context Hooks</h3><details><br><summary>SearchParams.js</summary><br><br><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// also grab setTheme</span></span><br><span class="line"><span class="keyword">const</span> [theme, setTheme] = useContext(ThemeContext);</span><br><span class="line"></span><br><span class="line"><span class="comment">// below BreedDropdown</span></span><br><span class="line">&lt;label htmlFor=<span class="string">"location"</span>&gt;</span><br><span class="line">  Theme</span><br><span class="line">  &lt;select</span><br><span class="line">    value=&#123;theme&#125;</span><br><span class="line">    onChange=&#123;e =&gt; setTheme(e.target.value)&#125;</span><br><span class="line">    onBlur=&#123;e =&gt; setTheme(e.target.value)&#125;</span><br><span class="line">  &gt;</span><br><span class="line">    &lt;option value=<span class="string">"peru"</span>&gt;Peru&lt;<span class="regexp">/option&gt;</span></span><br><span class="line"><span class="regexp">    &lt;option value="darkblue"&gt;Dark Blue&lt;/</span>option&gt;</span><br><span class="line">    &lt;option value=<span class="string">"chartreuse"</span>&gt;Chartreuse&lt;<span class="regexp">/option&gt;</span></span><br><span class="line"><span class="regexp">    &lt;option value="mediumorchid"&gt;Medium Orchid&lt;/</span>option&gt;</span><br><span class="line">  &lt;<span class="regexp">/select&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>label&gt;;</span><br></pre></td></tr></table></figure><br><br></details>

<p>同时要修改<code>Pet.js</code>，把<code>&lt;a&gt;</code>链接更改为<code>&lt;link&gt;</code>，不然会重新打开网页，无法保存状态。</p>
<h2 id="Portals"><a href="#Portals" class="headerlink" title="Portals"></a>Portals</h2><h3 id="Modal-Dialog-with-Portals"><a href="#Modal-Dialog-with-Portals" class="headerlink" title="Modal Dialog with Portals"></a>Modal Dialog with Portals</h3><p>在index.html中添加一个单独的挂载点</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- above #root --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"modal"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>创建一个Modal.js</p>
<details><br><summary>Modal.js</summary><br><br><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; useEffect, useRef &#125; <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">import</span> &#123; createPortal &#125; <span class="keyword">from</span> <span class="string">'react-dom'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> Modal = <span class="function">(<span class="params">&#123; children &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> elRef = useRef(<span class="literal">null</span>)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (!elRef.current) &#123;</span><br><span class="line">    elRef.current = <span class="built_in">document</span>.createElement(<span class="string">'div'</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  useEffect(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> modalRoot = <span class="built_in">document</span>.getElementById(<span class="string">'modal'</span>)</span><br><span class="line">    modalRoot.appendChild(elRef.current)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="params">()</span> =&gt;</span> modalRoot.removeChild(elRef.current)</span><br><span class="line">  &#125;, [])</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> createPortal(<span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;children&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>, elRef.current)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> Modal</span><br></pre></td></tr></table></figure><br><br></details>

<h3 id="Displaying-the-Modal"><a href="#Displaying-the-Modal" class="headerlink" title="Displaying the Modal"></a>Displaying the Modal</h3><details><br><summary>修改Details.js</summary><br><br><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// at the top</span></span><br><span class="line"><span class="keyword">import</span> &#123; navigate &#125; <span class="keyword">from</span> <span class="string">"@reach/router"</span>;</span><br><span class="line"><span class="keyword">import</span> Modal <span class="keyword">from</span> <span class="string">"./Modal"</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// add showModal</span></span><br><span class="line">state = &#123; <span class="attr">loading</span>: <span class="literal">true</span>, <span class="attr">showModal</span>: <span class="literal">false</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// add setState inside componentDidMount</span></span><br><span class="line">url: animal.url,</span><br><span class="line">  <span class="comment">// above render</span></span><br><span class="line">  (toggleModal = <span class="function"><span class="params">()</span> =&gt;</span> <span class="keyword">this</span>.setState(&#123; <span class="attr">showModal</span>: !<span class="keyword">this</span>.state.showModal &#125;));</span><br><span class="line">adopt = <span class="function"><span class="params">()</span> =&gt;</span> navigate(<span class="keyword">this</span>.state.url);</span><br><span class="line"></span><br><span class="line"><span class="comment">// add showModal</span></span><br><span class="line"><span class="keyword">const</span> &#123;</span><br><span class="line">  media,</span><br><span class="line">  animal,</span><br><span class="line">  breed,</span><br><span class="line">  location,</span><br><span class="line">  description,</span><br><span class="line">  name,</span><br><span class="line">  url,</span><br><span class="line">  showModal</span><br><span class="line">&#125; = <span class="keyword">this</span>.state;</span><br><span class="line"></span><br><span class="line"><span class="comment">// below description</span></span><br><span class="line">&#123;</span><br><span class="line">  showModal ? (</span><br><span class="line">    &lt;Modal&gt;</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;h1&gt;Would you like to adopt &#123;name&#125;?<span class="xml"><span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">        &lt;div className=<span class="string">"buttons"</span>&gt;</span><br><span class="line">          &lt;button onClick=&#123;<span class="keyword">this</span>.adopt&#125;&gt;Yes&lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">          &lt;button onClick=&#123;this.toggleModal&#125;&gt;No&lt;/</span>button&gt;</span><br><span class="line">        &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">      &lt;/</span>div&gt;</span><br><span class="line">    &lt;<span class="regexp">/Modal&gt;</span></span><br><span class="line"><span class="regexp">  ) : null;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure><br><br></details>

      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/FrontEndMasters/" rel="tag"># FrontEndMasters</a>
          
            <a href="/tags/React/" rel="tag"># React</a>
          
            <a href="/tags/JavaScript/" rel="tag"># JavaScript</a>
          
            <a href="/tags/Parcel/" rel="tag"># Parcel</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2019/06/06/Visual-Studio-Code/" rel="next" title="Visual-Studio-Code">
                <i class="fa fa-chevron-left"></i> Visual-Studio-Code
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2019/06/22/Full-Stack-for-Front-Ends-Part-2/" rel="prev" title="Full-Stack-for-Front-Ends-Part-2">
                Full-Stack-for-Front-Ends-Part-2 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>


  </div>


          </div>
          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="https://img.zcool.cn/community/04c6fd55fa1a4a000001b19c79e625.jpg@160w_160h_1c_1e_1o_100sh.jpg" alt="刘勇">
            
              <p class="site-author-name" itemprop="name">刘勇</p>
              <div class="site-description motion-element" itemprop="description"></div>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">86</span>
                    <span class="site-state-item-name">日志</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  
                    
                      <a href="/categories/">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">6</span>
                    <span class="site-state-item-name">分类</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  
                    
                      <a href="/tags/">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">140</span>
                    <span class="site-state-item-name">标签</span>
                  </a>
                </div>
              
            </nav>
          

          

          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="https://github.com/blingblingredstar" title="GitHub &rarr; https://github.com/blingblingredstar" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="mailto:564447023@qq.com" title="E-Mail &rarr; mailto:564447023@qq.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                </span>
              
            </div>
          

          

          
          

          
            
          
          

        </div>
      </div>

      
      <!--noindex-->
        <div class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
            
            
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Introduction"><span class="nav-number">1.</span> <span class="nav-text">Introduction</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Project-Setup"><span class="nav-number">1.1.</span> <span class="nav-text">Project Setup</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#A-Note-on-the-Course-Font"><span class="nav-number">1.2.</span> <span class="nav-text">A Note on the Course Font</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Pure-React"><span class="nav-number">2.</span> <span class="nav-text">Pure React</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Getting-Started-with-Pure-React"><span class="nav-number">2.1.</span> <span class="nav-text">Getting Started with Pure React</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#createElement-Arguments"><span class="nav-number">2.2.</span> <span class="nav-text">createElement Arguments</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Reusable-Components"><span class="nav-number">2.3.</span> <span class="nav-text">Reusable Components</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Passing-in-Component-Props"><span class="nav-number">2.4.</span> <span class="nav-text">Passing in Component Props</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Destructuring-Props"><span class="nav-number">2.5.</span> <span class="nav-text">Destructuring Props</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Tools"><span class="nav-number">3.</span> <span class="nav-text">Tools</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#npm-amp-Generating-a-package-json-File"><span class="nav-number">3.1.</span> <span class="nav-text">npm &amp; Generating a package.json File</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Prettier"><span class="nav-number">3.2.</span> <span class="nav-text">Prettier</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#npm-Scripts"><span class="nav-number">3.3.</span> <span class="nav-text">npm Scripts</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Prettier-Setup"><span class="nav-number">3.4.</span> <span class="nav-text">Prettier Setup</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ESLint-Setup"><span class="nav-number">3.5.</span> <span class="nav-text">ESLint Setup</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ESLint-Confirguration"><span class="nav-number">3.6.</span> <span class="nav-text">ESLint Confirguration</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#gitignore"><span class="nav-number">3.7.</span> <span class="nav-text">gitignore</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Parcel"><span class="nav-number">3.8.</span> <span class="nav-text">Parcel</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Installing-React-amp-ReactDOM"><span class="nav-number">3.9.</span> <span class="nav-text">Installing React &amp; ReactDOM</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Separate-App-into-Modules"><span class="nav-number">3.10.</span> <span class="nav-text">Separate App into Modules</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#JSX"><span class="nav-number">4.</span> <span class="nav-text">JSX</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Converting-to-JSX"><span class="nav-number">4.1.</span> <span class="nav-text">Converting to JSX</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Configuring-ESLint-for-React"><span class="nav-number">4.2.</span> <span class="nav-text">Configuring ESLint for React</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#JSX-Composite-Components-amp-Expressions"><span class="nav-number">4.3.</span> <span class="nav-text">JSX Composite Components &amp; Expressions</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Hooks"><span class="nav-number">5.</span> <span class="nav-text">Hooks</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Creating-a-Search-Component"><span class="nav-number">5.1.</span> <span class="nav-text">Creating a Search Component</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Setting-State-with-Hooks"><span class="nav-number">5.2.</span> <span class="nav-text">Setting State with Hooks</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Best-Practice-for-Hooks"><span class="nav-number">5.3.</span> <span class="nav-text">Best Practice for Hooks</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Configuring-ESLint-for-Hooks"><span class="nav-number">5.4.</span> <span class="nav-text">Configuring ESLint for Hooks</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Calling-the-Pet-API"><span class="nav-number">5.5.</span> <span class="nav-text">Calling the Pet API</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Unique-List-Item-Keys"><span class="nav-number">5.6.</span> <span class="nav-text">Unique List Item Keys</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Breed-Dropdown"><span class="nav-number">5.7.</span> <span class="nav-text">Breed Dropdown</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Custom-Hooks"><span class="nav-number">5.8.</span> <span class="nav-text">Custom Hooks</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Effects"><span class="nav-number">6.</span> <span class="nav-text">Effects</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#useEffect"><span class="nav-number">6.1.</span> <span class="nav-text">useEffect</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Declaring-Effect-Dependancies"><span class="nav-number">6.2.</span> <span class="nav-text">Declaring Effect Dependancies</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Effect-Lifecycle-Walkthrough"><span class="nav-number">6.3.</span> <span class="nav-text">Effect Lifecycle Walkthrough</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Run-Only-Once"><span class="nav-number">6.4.</span> <span class="nav-text">Run Only Once</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Dev-Tools"><span class="nav-number">7.</span> <span class="nav-text">Dev Tools</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Environment-Variables-amp-Strict-Mode"><span class="nav-number">7.1.</span> <span class="nav-text">Environment Variables &amp; Strict Mode</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#NODE-ENV-development"><span class="nav-number">7.1.1.</span> <span class="nav-text">NODE_ENV=development</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Strict-Mode"><span class="nav-number">7.1.2.</span> <span class="nav-text">Strict Mode</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#React-Browser-Dev-Tools"><span class="nav-number">7.1.3.</span> <span class="nav-text">React Browser Dev Tools</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Async-amp-Routing"><span class="nav-number">8.</span> <span class="nav-text">Async &amp; Routing</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Asynchronous-API-Requests"><span class="nav-number">8.1.</span> <span class="nav-text">Asynchronous API Requests</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Use-the-Fallback-Mock-API"><span class="nav-number">8.2.</span> <span class="nav-text">Use the Fallback Mock API</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#One-Way-Data-Flow"><span class="nav-number">8.3.</span> <span class="nav-text">One-Way Data Flow</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Reformatting-the-Pet-Component"><span class="nav-number">8.4.</span> <span class="nav-text">Reformatting the Pet Component</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Reach-Router"><span class="nav-number">8.5.</span> <span class="nav-text">Reach Router</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Debugging-amp-Reach-Router-Link"><span class="nav-number">8.6.</span> <span class="nav-text">Debugging &amp; Reach Router Link</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Class-Components"><span class="nav-number">9.</span> <span class="nav-text">Class Components</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#React-Class-Components"><span class="nav-number">9.1.</span> <span class="nav-text">React Class Components</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Rendering-the-Component"><span class="nav-number">9.2.</span> <span class="nav-text">Rendering the Component</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Configuring-Babel-for-Parcel"><span class="nav-number">9.3.</span> <span class="nav-text">Configuring Babel for Parcel</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Creating-an-Image-Carousel"><span class="nav-number">9.4.</span> <span class="nav-text">Creating an Image Carousel</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Context-Problem"><span class="nav-number">9.5.</span> <span class="nav-text">Context Problem</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Carousel-Implementation"><span class="nav-number">9.6.</span> <span class="nav-text">Carousel Implementation</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Error-Boundaries"><span class="nav-number">9.7.</span> <span class="nav-text">Error Boundaries</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Error-Boundary-Middleware"><span class="nav-number">9.8.</span> <span class="nav-text">Error Boundary Middleware</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#404-Page-Redirect"><span class="nav-number">9.9.</span> <span class="nav-text">404 Page Redirect</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Context"><span class="nav-number">10.</span> <span class="nav-text">Context</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#React-Context"><span class="nav-number">10.1.</span> <span class="nav-text">React Context</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Context-with-Hooks"><span class="nav-number">10.2.</span> <span class="nav-text">Context with Hooks</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Context-with-Classes"><span class="nav-number">10.3.</span> <span class="nav-text">Context with Classes</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Persisting-State-with-Context-Hooks"><span class="nav-number">10.4.</span> <span class="nav-text">Persisting State with Context Hooks</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Portals"><span class="nav-number">11.</span> <span class="nav-text">Portals</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Modal-Dialog-with-Portals"><span class="nav-number">11.1.</span> <span class="nav-text">Modal Dialog with Portals</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Displaying-the-Modal"><span class="nav-number">11.2.</span> <span class="nav-text">Displaying the Modal</span></a></li></ol></li></ol></div>
            

          </div>
        </div>
      <!--/noindex-->
      

      

    </div>
  </aside>
  


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2020</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">刘勇</span>

  

  
</div>









        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  <script src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>


  


  <script src="/js/src/utils.js?v=7.0.1"></script>

  <script src="/js/src/motion.js?v=7.0.1"></script>



  
  


  <script src="/js/src/affix.js?v=7.0.1"></script>

  <script src="/js/src/schemes/pisces.js?v=7.0.1"></script>



  
  <script src="/js/src/scrollspy.js?v=7.0.1"></script>
<script src="/js/src/post-details.js?v=7.0.1"></script>



  


  <script src="/js/src/next-boot.js?v=7.0.1"></script>


  

  

  

  


  


  




  

  

  

  

  

  

  

  

  

  

  

  

  

  

</body>
</html>
